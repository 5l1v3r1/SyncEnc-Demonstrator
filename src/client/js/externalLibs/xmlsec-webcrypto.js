var xpath="undefined"==typeof exports?{}:exports;!function(e){"use strict";function t(e){var t=Array.prototype.slice,r=e.length,n=function(){var o=t.call(arguments);return o.length<r?(i=o,s=n,function(){return s.apply(this,i.concat(t.call(arguments)))}):e.apply(this,t.apply(arguments,[0,r]));var i,s};return n}var r=t(function(e,t){for(var r=0;r<t.length;r+=1)e(t[r],r,t)}),n=t(function(e,t,n){var o=t;return r(function(t,r){o=e(o,t,r)},n),o}),o=t(function(e,t){var n=new Array(t.length);return r(function(t,r){n[r]=e(t)},t),n}),i=t(function(e,t){var n=[];return r(function(t,r){e(t,r)&&n.push(t)},t),n});function s(){if(0===arguments.length)throw new Error("compose requires at least one argument");var e=Array.prototype.slice.call(arguments).reverse(),t=e[0],r=e.slice(1);return function(){return n(function(e,t){return t(e)},t.apply(null,arguments),r)}}var a=t(function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return!0;return!1});var u=t(function(e,t){return t[e]});function c(e){return e.toString()}var l=t(function(e,t){return t.join(e)}),p=t(function(e,t,r){return e+r+t});function h(e){for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}f.prototype=new Object,f.prototype.constructor=f,f.superclass=Object.prototype;function f(){this.init()}f.prototype.init=function(){this.reduceActions=[],this.reduceActions[3]=function(e){return new w(e[0],e[2])},this.reduceActions[5]=function(e){return new v(e[0],e[2])},this.reduceActions[7]=function(e){return new N(e[0],e[2])},this.reduceActions[8]=function(e){return new S(e[0],e[2])},this.reduceActions[10]=function(e){return new b(e[0],e[2])},this.reduceActions[11]=function(e){return new T(e[0],e[2])},this.reduceActions[12]=function(e){return new x(e[0],e[2])},this.reduceActions[13]=function(e){return new I(e[0],e[2])},this.reduceActions[15]=function(e){return new R(e[0],e[2])},this.reduceActions[16]=function(e){return new C(e[0],e[2])},this.reduceActions[18]=function(e){return new L(e[0],e[2])},this.reduceActions[19]=function(e){return new M(e[0],e[2])},this.reduceActions[20]=function(e){return new O(e[0],e[2])},this.reduceActions[22]=function(e){return new E(e[1])},this.reduceActions[24]=function(e){return new D(e[0],e[2])},this.reduceActions[25]=function(e){return new U(void 0,void 0,e[0])},this.reduceActions[27]=function(e){return e[0].locationPath=e[2],e[0]},this.reduceActions[28]=function(e){return e[0].locationPath=e[2],e[0].locationPath.steps.unshift(new _(_.DESCENDANTORSELF,V.nodeTest,[])),e[0]},this.reduceActions[29]=function(e){return new U(e[0],[],void 0)},this.reduceActions[30]=function(e){return $.instance_of(e[0],U)?(void 0==e[0].filterPredicates&&(e[0].filterPredicates=[]),e[0].filterPredicates.push(e[1]),e[0]):new U(e[0],[e[1]],void 0)},this.reduceActions[32]=function(e){return e[1]},this.reduceActions[33]=function(e){return new X(e[0])},this.reduceActions[34]=function(e){return new W(e[0])},this.reduceActions[36]=function(e){return new B(e[0],[])},this.reduceActions[37]=function(e){return new B(e[0],e[2])},this.reduceActions[38]=function(e){return[e[0]]},this.reduceActions[39]=function(e){return e[2].unshift(e[0]),e[2]},this.reduceActions[43]=function(e){return new P(!0,[])},this.reduceActions[44]=function(e){return e[1].absolute=!0,e[1]},this.reduceActions[46]=function(e){return new P(!1,[e[0]])},this.reduceActions[47]=function(e){return e[0].steps.push(e[2]),e[0]},this.reduceActions[49]=function(e){return new _(e[0],e[1],[])},this.reduceActions[50]=function(e){return new _(_.CHILD,e[0],[])},this.reduceActions[51]=function(e){return new _(e[0],e[1],e[2])},this.reduceActions[52]=function(e){return new _(_.CHILD,e[0],e[1])},this.reduceActions[54]=function(e){return[e[0]]},this.reduceActions[55]=function(e){return e[1].unshift(e[0]),e[1]},this.reduceActions[56]=function(e){return"ancestor"==e[0]?_.ANCESTOR:"ancestor-or-self"==e[0]?_.ANCESTORORSELF:"attribute"==e[0]?_.ATTRIBUTE:"child"==e[0]?_.CHILD:"descendant"==e[0]?_.DESCENDANT:"descendant-or-self"==e[0]?_.DESCENDANTORSELF:"following"==e[0]?_.FOLLOWING:"following-sibling"==e[0]?_.FOLLOWINGSIBLING:"namespace"==e[0]?_.NAMESPACE:"parent"==e[0]?_.PARENT:"preceding"==e[0]?_.PRECEDING:"preceding-sibling"==e[0]?_.PRECEDINGSIBLING:"self"==e[0]?_.SELF:-1},this.reduceActions[57]=function(e){return _.ATTRIBUTE},this.reduceActions[59]=function(e){return"comment"==e[0]?V.commentTest:"text"==e[0]?V.textTest:"processing-instruction"==e[0]?V.anyPiTest:"node"==e[0]?V.nodeTest:new V(-1,void 0)},this.reduceActions[60]=function(e){return new V.PITest(e[2])},this.reduceActions[61]=function(e){return e[1]},this.reduceActions[63]=function(e){return e[1].absolute=!0,e[1].steps.unshift(new _(_.DESCENDANTORSELF,V.nodeTest,[])),e[1]},this.reduceActions[64]=function(e){return e[0].steps.push(new _(_.DESCENDANTORSELF,V.nodeTest,[])),e[0].steps.push(e[2]),e[0]},this.reduceActions[65]=function(e){return new _(_.SELF,V.nodeTest,[])},this.reduceActions[66]=function(e){return new _(_.PARENT,V.nodeTest,[])},this.reduceActions[67]=function(e){return new H(e[1])},this.reduceActions[68]=function(e){return V.nameTestAny},this.reduceActions[69]=function(e){return new V.NameTestPrefixAny(e[0].split(":")[0])},this.reduceActions[70]=function(e){return new V.NameTestQName(e[0])}},f.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "],f.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "],f.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "],f.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]],f.DOUBLEDOT=2,f.DOUBLECOLON=3,f.DOUBLESLASH=4,f.NOTEQUAL=5,f.LESSTHANOREQUAL=6,f.GREATERTHANOREQUAL=7,f.AND=8,f.OR=9,f.MOD=10,f.DIV=11,f.MULTIPLYOPERATOR=12,f.FUNCTIONNAME=13,f.AXISNAME=14,f.LITERAL=15,f.NUMBER=16,f.ASTERISKNAMETEST=17,f.QNAME=18,f.NCNAMECOLONASTERISK=19,f.NODETYPE=20,f.PROCESSINGINSTRUCTIONWITHLITERAL=21,f.EQUALS=22,f.LESSTHAN=23,f.GREATERTHAN=24,f.PLUS=25,f.MINUS=26,f.BAR=27,f.SLASH=28,f.LEFTPARENTHESIS=29,f.RIGHTPARENTHESIS=30,f.COMMA=31,f.AT=32,f.LEFTBRACKET=33,f.RIGHTBRACKET=34,f.DOT=35,f.DOLLAR=36,f.prototype.tokenize=function(e){for(var t=[],r=[],n=e+"\0",o=0,i=n.charAt(o++);;){for(;" "==i||"\t"==i||"\r"==i||"\n"==i;)i=n.charAt(o++);if("\0"==i||o>=n.length)break;if("("!=i)if(")"!=i)if("["!=i)if("]"!=i)if("@"!=i)if(","!=i)if("|"!=i)if("+"!=i)if("-"!=i)if("="!=i)if("$"!=i)if("."!=i)if("'"!=i&&'"'!=i)if(i>="0"&&i<="9"){l=i;for(i=n.charAt(o++);i>="0"&&i<="9";)l+=i,i=n.charAt(o++);if("."==i&&n.charAt(o)>="0"&&n.charAt(o)<="9")for(l+=i,l+=n.charAt(o++),i=n.charAt(o++);i>="0"&&i<="9";)l+=i,i=n.charAt(o++);t.push(f.NUMBER),r.push(l)}else if("*"!=i)if(":"!=i||":"!=n.charAt(o))if("/"!=i)if("!"!=i||"="!=n.charAt(o))if("<"!=i)if(">"!=i){if("_"!=i&&!$.isLetter(i.charCodeAt(0)))throw new Error("Unexpected character "+i);var s=i;for(i=n.charAt(o++);$.isNCNameChar(i.charCodeAt(0));)s+=i,i=n.charAt(o++);if(t.length>0){if((a=t[t.length-1])!=f.AT&&a!=f.DOUBLECOLON&&a!=f.LEFTPARENTHESIS&&a!=f.LEFTBRACKET&&a!=f.AND&&a!=f.OR&&a!=f.MOD&&a!=f.DIV&&a!=f.MULTIPLYOPERATOR&&a!=f.SLASH&&a!=f.DOUBLESLASH&&a!=f.BAR&&a!=f.PLUS&&a!=f.MINUS&&a!=f.EQUALS&&a!=f.NOTEQUAL&&a!=f.LESSTHAN&&a!=f.LESSTHANOREQUAL&&a!=f.GREATERTHAN&&a!=f.GREATERTHANOREQUAL){if("and"==s){t.push(f.AND),r.push(s);continue}if("or"==s){t.push(f.OR),r.push(s);continue}if("mod"==s){t.push(f.MOD),r.push(s);continue}if("div"==s){t.push(f.DIV),r.push(s);continue}}}if(":"==i){if("*"==n.charAt(o)){t.push(f.NCNAMECOLONASTERISK),r.push(s+":*"),o++,i=n.charAt(o++);continue}if("_"==n.charAt(o)||$.isLetter(n.charCodeAt(o))){for(s+=":",i=n.charAt(o++);$.isNCNameChar(i.charCodeAt(0));)s+=i,i=n.charAt(o++);if("("==i){t.push(f.FUNCTIONNAME),r.push(s);continue}t.push(f.QNAME),r.push(s);continue}if(":"==n.charAt(o)){t.push(f.AXISNAME),r.push(s);continue}}if("("==i){if("comment"==s||"text"==s||"node"==s){t.push(f.NODETYPE),r.push(s);continue}if("processing-instruction"==s){")"==n.charAt(o)?t.push(f.NODETYPE):t.push(f.PROCESSINGINSTRUCTIONWITHLITERAL),r.push(s);continue}t.push(f.FUNCTIONNAME),r.push(s);continue}t.push(f.QNAME),r.push(s)}else{if("="==n.charAt(o)){t.push(f.GREATERTHANOREQUAL),r.push(">="),o++,i=n.charAt(o++);continue}t.push(f.GREATERTHAN),r.push(">"),i=n.charAt(o++)}else{if("="==n.charAt(o)){t.push(f.LESSTHANOREQUAL),r.push("<="),o++,i=n.charAt(o++);continue}t.push(f.LESSTHAN),r.push("<"),i=n.charAt(o++)}else t.push(f.NOTEQUAL),r.push("!="),o++,i=n.charAt(o++);else{if("/"==(i=n.charAt(o++))){t.push(f.DOUBLESLASH),r.push("//"),i=n.charAt(o++);continue}t.push(f.SLASH),r.push("/")}else t.push(f.DOUBLECOLON),r.push("::"),o++,i=n.charAt(o++);else{if(t.length>0){var a;if((a=t[t.length-1])!=f.AT&&a!=f.DOUBLECOLON&&a!=f.LEFTPARENTHESIS&&a!=f.LEFTBRACKET&&a!=f.AND&&a!=f.OR&&a!=f.MOD&&a!=f.DIV&&a!=f.MULTIPLYOPERATOR&&a!=f.SLASH&&a!=f.DOUBLESLASH&&a!=f.BAR&&a!=f.PLUS&&a!=f.MINUS&&a!=f.EQUALS&&a!=f.NOTEQUAL&&a!=f.LESSTHAN&&a!=f.LESSTHANOREQUAL&&a!=f.GREATERTHAN&&a!=f.GREATERTHANOREQUAL){t.push(f.MULTIPLYOPERATOR),r.push(i),i=n.charAt(o++);continue}}t.push(f.ASTERISKNAMETEST),r.push(i),i=n.charAt(o++)}else{for(var u=i,c="";o<n.length&&(i=n.charAt(o))!==u;)c+=i,o+=1;if(i!==u)throw Z.fromMessage("Unterminated string literal: "+u+c);o+=1,t.push(f.LITERAL),r.push(c),i=n.charAt(o++)}else{if("."==(i=n.charAt(o++))){t.push(f.DOUBLEDOT),r.push(".."),i=n.charAt(o++);continue}if(i>="0"&&i<="9"){var l="."+i;for(i=n.charAt(o++);i>="0"&&i<="9";)l+=i,i=n.charAt(o++);t.push(f.NUMBER),r.push(l);continue}t.push(f.DOT),r.push(".")}else t.push(f.DOLLAR),r.push(i),i=n.charAt(o++);else t.push(f.EQUALS),r.push(i),i=n.charAt(o++);else t.push(f.MINUS),r.push(i),i=n.charAt(o++);else t.push(f.PLUS),r.push(i),i=n.charAt(o++);else t.push(f.BAR),r.push(i),i=n.charAt(o++);else t.push(f.COMMA),r.push(i),i=n.charAt(o++);else t.push(f.AT),r.push(i),i=n.charAt(o++);else t.push(f.RIGHTBRACKET),r.push(i),i=n.charAt(o++);else t.push(f.LEFTBRACKET),r.push(i),i=n.charAt(o++);else t.push(f.RIGHTPARENTHESIS),r.push(i),i=n.charAt(o++);else t.push(f.LEFTPARENTHESIS),r.push(i),i=n.charAt(o++)}return t.push(1),r.push("[EOF]"),[t,r]},f.SHIFT="s",f.REDUCE="r",f.ACCEPT="a",f.prototype.parse=function(e){var t,r,n=this.tokenize(e);if(void 0!=n){t=n[0],r=n[1];var o,i,s=0,a=[],u=[],c=[];for(a.push(0),u.push(1),c.push("_S"),o=t[s],i=r[s++];;)switch(e=a[a.length-1],f.actionTable[e].charAt(o-1)){case f.SHIFT:u.push(-o),c.push(i),a.push(f.actionTableNumber[e].charCodeAt(o-1)-32),o=t[s],i=r[s++];break;case f.REDUCE:for(var l=f.productions[f.actionTableNumber[e].charCodeAt(o-1)-32][1],p=[],h=0;h<l;h++)u.pop(),p.unshift(c.pop()),a.pop();var d=a[a.length-1];u.push(f.productions[f.actionTableNumber[e].charCodeAt(o-1)-32][0]),void 0==this.reduceActions[f.actionTableNumber[e].charCodeAt(o-1)-32]?c.push(p[0]):c.push(this.reduceActions[f.actionTableNumber[e].charCodeAt(o-1)-32](p)),a.push(f.gotoTable[d].charCodeAt(f.productions[f.actionTableNumber[e].charCodeAt(o-1)-32][0]-2)-33);break;case f.ACCEPT:return new m(c.pop());default:throw new Error("XPath parse error")}}},m.prototype=new Object,m.prototype.constructor=m,m.superclass=Object.prototype;function m(e){this.expression=e}m.prototype.toString=function(){return this.expression.toString()};function d(e,t,r){t in e||(e[t]=r)}m.prototype.evaluate=function(e){return e.contextNode=e.expressionContextNode,e.contextSize=1,e.contextPosition=1,e.isHtml&&(d(e,"caseInsensitive",!0),d(e,"allowAnyNamespaceForNoPrefix",!0)),d(e,"caseInsensitive",!1),this.expression.evaluate(e)},m.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace",m.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/",g.prototype=new Object,g.prototype.constructor=g,g.superclass=Object.prototype;function g(){}g.prototype.init=function(){},g.prototype.toString=function(){return"<Expression>"},g.prototype.evaluate=function(e){throw new Error("Could not evaluate expression.")},y.prototype=new g,y.prototype.constructor=y,y.superclass=g.prototype;function y(e){arguments.length>0&&this.init(e)}y.prototype.init=function(e){this.rhs=e},E.prototype=new y,E.prototype.constructor=E,E.superclass=y.prototype;function E(e){arguments.length>0&&this.init(e)}E.prototype.init=function(e){E.superclass.init.call(this,e)},E.prototype.evaluate=function(e){return this.rhs.evaluate(e).number().negate()},E.prototype.toString=function(){return"-"+this.rhs.toString()},A.prototype=new g,A.prototype.constructor=A,A.superclass=g.prototype;function A(e,t){arguments.length>0&&this.init(e,t)}A.prototype.init=function(e,t){this.lhs=e,this.rhs=t},w.prototype=new A,w.prototype.constructor=w,w.superclass=A.prototype;function w(e,t){arguments.length>0&&this.init(e,t)}w.prototype.init=function(e,t){w.superclass.init.call(this,e,t)},w.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"},w.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?t:this.rhs.evaluate(e).bool()},v.prototype=new A,v.prototype.constructor=v,v.superclass=A.prototype;function v(e,t){arguments.length>0&&this.init(e,t)}v.prototype.init=function(e,t){v.superclass.init.call(this,e,t)},v.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"},v.prototype.evaluate=function(e){var t=this.lhs.evaluate(e).bool();return t.booleanValue()?this.rhs.evaluate(e).bool():t},N.prototype=new A,N.prototype.constructor=N,N.superclass=A.prototype;function N(e,t){arguments.length>0&&this.init(e,t)}N.prototype.init=function(e,t){N.superclass.init.call(this,e,t)},N.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"},N.prototype.evaluate=function(e){return this.lhs.evaluate(e).equals(this.rhs.evaluate(e))},S.prototype=new A,S.prototype.constructor=S,S.superclass=A.prototype;function S(e,t){arguments.length>0&&this.init(e,t)}S.prototype.init=function(e,t){S.superclass.init.call(this,e,t)},S.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"},S.prototype.evaluate=function(e){return this.lhs.evaluate(e).notequal(this.rhs.evaluate(e))},b.prototype=new A,b.prototype.constructor=b,b.superclass=A.prototype;function b(e,t){arguments.length>0&&this.init(e,t)}b.prototype.init=function(e,t){b.superclass.init.call(this,e,t)},b.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthan(this.rhs.evaluate(e))},b.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"},T.prototype=new A,T.prototype.constructor=T,T.superclass=A.prototype;function T(e,t){arguments.length>0&&this.init(e,t)}T.prototype.init=function(e,t){T.superclass.init.call(this,e,t)},T.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthan(this.rhs.evaluate(e))},T.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"},x.prototype=new A,x.prototype.constructor=x,x.superclass=A.prototype;function x(e,t){arguments.length>0&&this.init(e,t)}x.prototype.init=function(e,t){x.superclass.init.call(this,e,t)},x.prototype.evaluate=function(e){return this.lhs.evaluate(e).lessthanorequal(this.rhs.evaluate(e))},x.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"},I.prototype=new A,I.prototype.constructor=I,I.superclass=A.prototype;function I(e,t){arguments.length>0&&this.init(e,t)}I.prototype.init=function(e,t){I.superclass.init.call(this,e,t)},I.prototype.evaluate=function(e){return this.lhs.evaluate(e).greaterthanorequal(this.rhs.evaluate(e))},I.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"},R.prototype=new A,R.prototype.constructor=R,R.superclass=A.prototype;function R(e,t){arguments.length>0&&this.init(e,t)}R.prototype.init=function(e,t){R.superclass.init.call(this,e,t)},R.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().plus(this.rhs.evaluate(e).number())},R.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"},C.prototype=new A,C.prototype.constructor=C,C.superclass=A.prototype;function C(e,t){arguments.length>0&&this.init(e,t)}C.prototype.init=function(e,t){C.superclass.init.call(this,e,t)},C.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().minus(this.rhs.evaluate(e).number())},C.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"},L.prototype=new A,L.prototype.constructor=L,L.superclass=A.prototype;function L(e,t){arguments.length>0&&this.init(e,t)}L.prototype.init=function(e,t){L.superclass.init.call(this,e,t)},L.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().multiply(this.rhs.evaluate(e).number())},L.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"},M.prototype=new A,M.prototype.constructor=M,M.superclass=A.prototype;function M(e,t){arguments.length>0&&this.init(e,t)}M.prototype.init=function(e,t){M.superclass.init.call(this,e,t)},M.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().div(this.rhs.evaluate(e).number())},M.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"},O.prototype=new A,O.prototype.constructor=O,O.superclass=A.prototype;function O(e,t){arguments.length>0&&this.init(e,t)}O.prototype.init=function(e,t){O.superclass.init.call(this,e,t)},O.prototype.evaluate=function(e){return this.lhs.evaluate(e).number().mod(this.rhs.evaluate(e).number())},O.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"},D.prototype=new A,D.prototype.constructor=D,D.superclass=A.prototype;function D(e,t){arguments.length>0&&this.init(e,t)}D.prototype.init=function(e,t){D.superclass.init.call(this,e,t)},D.prototype.evaluate=function(e){return this.lhs.evaluate(e).nodeset().union(this.rhs.evaluate(e).nodeset())},D.prototype.toString=function(){return o(c,[this.lhs,this.rhs]).join(" | ")},U.prototype=new g,U.prototype.constructor=U,U.superclass=g.prototype;function U(e,t,r){arguments.length>0&&this.init(e,t,r)}U.prototype.init=function(e,t,r){U.superclass.init.call(this),this.filter=e,this.filterPredicates=t,this.locationPath=r};U.applyPredicates=function(e,t,r){return n(function(e,r){var n=t.extend({contextSize:e.length});return i(function(e,t){return U.predicateMatches(r,n.extend({contextNode:e,contextPosition:t+1}))},e)},r,e)},U.getRoot=function(e,t){var r=t[0];if(9===r.nodeType)return r;if(e.virtualRoot)return e.virtualRoot;var n=r.ownerDocument;if(n)return n;for(var o=r;null!=o.parentNode;)o=o.parentNode;return o},U.applyStep=function(e,t,r){var n=[];switch(t.contextNode=r,e.axis){case _.ANCESTOR:if(t.contextNode===t.virtualRoot)break;for(o=2==t.contextNode.nodeType?U.getOwnerElement(t.contextNode):t.contextNode.parentNode;null!=o&&(e.nodeTest.matches(o,t)&&n.push(o),o!==t.virtualRoot);)o=o.parentNode;break;case _.ANCESTORORSELF:for(var o=t.contextNode;null!=o&&(e.nodeTest.matches(o,t)&&n.push(o),o!==t.virtualRoot);o=2==o.nodeType?U.getOwnerElement(o):o.parentNode);break;case _.ATTRIBUTE:var i=t.contextNode.attributes;if(null!=i)for(var s=0;s<i.length;s++){o=i.item(s);e.nodeTest.matches(o,t)&&n.push(o)}break;case _.CHILD:for(o=t.contextNode.firstChild;null!=o;o=o.nextSibling)e.nodeTest.matches(o,t)&&n.push(o);break;case _.DESCENDANT:for(var a=[t.contextNode.firstChild];a.length>0;)for(o=a.pop();null!=o;)e.nodeTest.matches(o,t)&&n.push(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling;break;case _.DESCENDANTORSELF:e.nodeTest.matches(t.contextNode,t)&&n.push(t.contextNode);for(a=[t.contextNode.firstChild];a.length>0;)for(o=a.pop();null!=o;)e.nodeTest.matches(o,t)&&n.push(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling;break;case _.FOLLOWING:if(t.contextNode===t.virtualRoot)break;a=[];null!=t.contextNode.firstChild?a.unshift(t.contextNode.firstChild):a.unshift(t.contextNode.nextSibling);for(o=t.contextNode.parentNode;null!=o&&9!=o.nodeType&&o!==t.virtualRoot;o=o.parentNode)a.unshift(o.nextSibling);do{for(o=a.pop();null!=o;)e.nodeTest.matches(o,t)&&n.push(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling}while(a.length>0);break;case _.FOLLOWINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(o=t.contextNode.nextSibling;null!=o;o=o.nextSibling)e.nodeTest.matches(o,t)&&n.push(o);break;case _.NAMESPACE:var u={};if(1==t.contextNode.nodeType){u.xml=m.XML_NAMESPACE_URI,u.xmlns=m.XMLNS_NAMESPACE_URI;for(o=t.contextNode;null!=o&&1==o.nodeType;o=o.parentNode)for(s=0;s<o.attributes.length;s++){var c=o.attributes.item(s),l=String(c.name);if("xmlns"==l)void 0==u[""]&&(u[""]=c.value);else if(l.length>6&&"xmlns:"==l.substring(0,6)){void 0==u[p=l.substring(6,l.length)]&&(u[p]=c.value)}}for(var p in u){var h=new k(p,u[p],t.contextNode);e.nodeTest.matches(h,t)&&n.push(h)}}break;case _.PARENT:o=null,t.contextNode!==t.virtualRoot&&(o=2==t.contextNode.nodeType?U.getOwnerElement(t.contextNode):t.contextNode.parentNode),null!=o&&e.nodeTest.matches(o,t)&&n.push(o);break;case _.PRECEDING:a=null!=t.virtualRoot?[t.virtualRoot]:[function(e){for(;e&&e.parentNode;)e=e.parentNode;return e}(t.contextNode)];e:for(;a.length>0;)for(o=a.pop();null!=o;){if(o==t.contextNode)break e;e.nodeTest.matches(o,t)&&n.unshift(o),null!=o.firstChild?(a.push(o.nextSibling),o=o.firstChild):o=o.nextSibling}break;case _.PRECEDINGSIBLING:if(t.contextNode===t.virtualRoot)break;for(o=t.contextNode.previousSibling;null!=o;o=o.previousSibling)e.nodeTest.matches(o,t)&&n.push(o);break;case _.SELF:e.nodeTest.matches(t.contextNode,t)&&n.push(t.contextNode)}return n},U.applySteps=function(e,t,r){return n(function(e,r){return[].concat.apply([],o(function(e){return U.applyPredicates(r.predicates,t,U.applyStep(r,t,e))},e))},r,e)},U.prototype.applyFilter=function(e,t){if(!this.filter)return{nodes:[e.contextNode]};var r=this.filter.evaluate(e);if(!$.instance_of(r,G)){if(null!=this.filterPredicates&&this.filterPredicates.length>0||null!=this.locationPath)throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used");return{nonNodes:r}}return{nodes:U.applyPredicates(this.filterPredicates||[],t,r.toUnsortedArray())}},U.applyLocationPath=function(e,t,r){if(!e)return r;var n=e.absolute?[U.getRoot(t,r)]:r;return U.applySteps(e.steps,t,n)},U.prototype.evaluate=function(e){var t=h(new Y,e),r=this.applyFilter(e,t);if("nonNodes"in r)return r.nonNodes;var n=new G;return n.addArray(U.applyLocationPath(this.locationPath,t,r.nodes)),n},U.predicateMatches=function(e,t){var r=e.evaluate(t);return $.instance_of(r,W)?t.contextPosition==r.numberValue():r.booleanValue()},U.predicateString=s(p("[","]"),c),U.predicatesString=s(l(""),o(U.predicateString)),U.prototype.toString=function(){if(void 0!=this.filter){var e=c(this.filter);return $.instance_of(this.filter,X)?p("'","'",e):void 0!=this.filterPredicates&&this.filterPredicates.length?p("(",")",e)+U.predicatesString(this.filterPredicates):void 0!=this.locationPath?e+(this.locationPath.absolute?"":"/")+c(this.locationPath):e}return c(this.locationPath)},U.getOwnerElement=function(e){if(e.ownerElement)return e.ownerElement;try{if(e.selectSingleNode)return e.selectSingleNode("..")}catch(e){}for(var t=(9==e.nodeType?e:e.ownerDocument).getElementsByTagName("*"),r=0;r<t.length;r++)for(var n=t.item(r),o=n.attributes,i=0;i<o.length;i++){if(o.item(i)===e)return n}return null},P.prototype=new Object,P.prototype.constructor=P,P.superclass=Object.prototype;function P(e,t){arguments.length>0&&this.init(e,t)}P.prototype.init=function(e,t){this.absolute=e,this.steps=t},P.prototype.toString=function(){return(this.absolute?"/":"")+o(c,this.steps).join("/")},_.prototype=new Object,_.prototype.constructor=_,_.superclass=Object.prototype;function _(e,t,r){arguments.length>0&&this.init(e,t,r)}_.prototype.init=function(e,t,r){this.axis=e,this.nodeTest=t,this.predicates=r},_.prototype.toString=function(){return _.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+U.predicatesString(this.predicates)},_.ANCESTOR=0,_.ANCESTORORSELF=1,_.ATTRIBUTE=2,_.CHILD=3,_.DESCENDANT=4,_.DESCENDANTORSELF=5,_.FOLLOWING=6,_.FOLLOWINGSIBLING=7,_.NAMESPACE=8,_.PARENT=9,_.PRECEDING=10,_.PRECEDINGSIBLING=11,_.SELF=12,_.STEPNAMES=n(function(e,t){return e[t[0]]=t[1],e},{},[[_.ANCESTOR,"ancestor"],[_.ANCESTORORSELF,"ancestor-or-self"],[_.ATTRIBUTE,"attribute"],[_.CHILD,"child"],[_.DESCENDANT,"descendant"],[_.DESCENDANTORSELF,"descendant-or-self"],[_.FOLLOWING,"following"],[_.FOLLOWINGSIBLING,"following-sibling"],[_.NAMESPACE,"namespace"],[_.PARENT,"parent"],[_.PRECEDING,"preceding"],[_.PRECEDINGSIBLING,"preceding-sibling"],[_.SELF,"self"]]),V.prototype=new Object,V.prototype.constructor=V,V.superclass=Object.prototype;function V(e,t){arguments.length>0&&this.init(e,t)}V.prototype.init=function(e,t){this.type=e,this.value=t},V.prototype.toString=function(){return"<unknown nodetest type>"},V.prototype.matches=function(e,t){console.warn("unknown node test type")},V.NAMETESTANY=0,V.NAMETESTPREFIXANY=1,V.NAMETESTQNAME=2,V.COMMENT=3,V.TEXT=4,V.PI=5,V.NODE=6,V.isNodeType=function(e){return s(a(e),u("nodeType"))},V.makeNodeTestType=function(e,t,r){var n=r||function(){};n.prototype=new V(t.type),n.prototype.constructor=e;for(var o in t)n.prototype[o]=t[o];return n},V.makeNodeTypeTest=function(e,t,r){return new(V.makeNodeTestType(e,{matches:V.isNodeType(t),toString:(n=r,function(){return n})}));var n},V.hasPrefix=function(e){return e.prefix||-1!==(e.nodeName||e.tagName).indexOf(":")},V.isElementOrAttribute=V.isNodeType([1,2]),V.nameSpaceMatches=function(e,t,r){var n=r.namespaceURI||"";if(!e)return!n||t.allowAnyNamespaceForNoPrefix&&!V.hasPrefix(r);var o=t.namespaceResolver.getNamespace(e,t.expressionContextNode);if(null==o)throw new Error("Cannot resolve QName "+e);return o===n},V.localNameMatches=function(e,t,r){var n=r.localName||r.nodeName;return t.caseInsensitive?e.toLowerCase()===n.toLowerCase():e===n},V.NameTestPrefixAny=V.makeNodeTestType(V.NAMETESTPREFIXANY,{matches:function(e,t){return V.isElementOrAttribute(e)&&V.nameSpaceMatches(this.prefix,t,e)},toString:function(){return this.prefix+":*"}},function(e){this.prefix=e}),V.NameTestQName=V.makeNodeTestType(V.NAMETESTQNAME,{matches:function(e,t){return V.isNodeType([1,2,k.XPATH_NAMESPACE_NODE])(e)&&V.nameSpaceMatches(this.prefix,t,e)&&V.localNameMatches(this.localName,t,e)},toString:function(){return this.name}},function(e){var t=e.split(":");this.name=e,this.prefix=t.length>1?t[0]:null,this.localName=t[t.length>1?1:0]}),V.PITest=V.makeNodeTestType(V.PI,{matches:function(e,t){return V.isNodeType([7])(e)&&(e.target||e.nodeName)===this.name},toString:function(){return p('processing-instruction("','")',this.name)}},function(e){this.name=e}),V.nameTestAny=V.makeNodeTypeTest(V.NAMETESTANY,[1,2,k.XPATH_NAMESPACE_NODE],"*"),V.textTest=V.makeNodeTypeTest(V.TEXT,[3,4],"text()"),V.commentTest=V.makeNodeTypeTest(V.COMMENT,[8],"comment()"),V.nodeTest=V.makeNodeTypeTest(V.NODE,[1,2,3,4,7,8,9],"node()"),V.anyPiTest=V.makeNodeTypeTest(V.PI,[7],"processing-instruction()"),H.prototype=new g,H.prototype.constructor=H,H.superclass=g.prototype;function H(e){arguments.length>0&&this.init(e)}H.prototype.init=function(e){this.variable=e},H.prototype.toString=function(){return"$"+this.variable},H.prototype.evaluate=function(e){var t=$.resolveQName(this.variable,e.namespaceResolver,e.contextNode,!1);if(null==t[0])throw new Error("Cannot resolve QName "+fn);var r=e.variableResolver.getVariable(t[1],t[0]);if(!r)throw Z.fromMessage("Undeclared variable: "+this.toString());return r},B.prototype=new g,B.prototype.constructor=B,B.superclass=g.prototype;function B(e,t){arguments.length>0&&this.init(e,t)}B.prototype.init=function(e,t){this.functionName=e,this.arguments=t},B.prototype.toString=function(){for(var e=this.functionName+"(",t=0;t<this.arguments.length;t++)t>0&&(e+=", "),e+=this.arguments[t].toString();return e+")"},B.prototype.evaluate=function(e){var t=Q.getFunctionFromContext(this.functionName,e);if(!t)throw new Error("Unknown function "+this.functionName);var r=[e].concat(this.arguments);return t.apply(e.functionResolver.thisArg,r)};var F=new Object;F.equals=function(e,t){return e.equals(t)},F.notequal=function(e,t){return e.notequal(t)},F.lessthan=function(e,t){return e.lessthan(t)},F.greaterthan=function(e,t){return e.greaterthan(t)},F.lessthanorequal=function(e,t){return e.lessthanorequal(t)},F.greaterthanorequal=function(e,t){return e.greaterthanorequal(t)},X.prototype=new g,X.prototype.constructor=X,X.superclass=g.prototype;function X(e){arguments.length>0&&this.init(e)}X.prototype.init=function(e){this.str=String(e)},X.prototype.toString=function(){return this.str},X.prototype.evaluate=function(e){return this},X.prototype.string=function(){return this},X.prototype.number=function(){return new W(this.str)},X.prototype.bool=function(){return new j(this.str)},X.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")},X.prototype.stringValue=function(){return this.str},X.prototype.numberValue=function(){return this.number().numberValue()},X.prototype.booleanValue=function(){return this.bool().booleanValue()},X.prototype.equals=function(e){return $.instance_of(e,j)?this.bool().equals(e):$.instance_of(e,W)?this.number().equals(e):$.instance_of(e,G)?e.compareWithString(this,F.equals):new j(this.str==e.str)},X.prototype.notequal=function(e){return $.instance_of(e,j)?this.bool().notequal(e):$.instance_of(e,W)?this.number().notequal(e):$.instance_of(e,G)?e.compareWithString(this,F.notequal):new j(this.str!=e.str)},X.prototype.lessthan=function(e){return this.number().lessthan(e)},X.prototype.greaterthan=function(e){return this.number().greaterthan(e)},X.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},X.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},W.prototype=new g,W.prototype.constructor=W,W.superclass=g.prototype;function W(e){arguments.length>0&&this.init(e)}W.prototype.init=function(e){this.num="string"==typeof e?this.parse(e):Number(e)},W.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/,W.prototype.parse=function(e){return this.numberFormat.test(e)?parseFloat(e):Number.NaN};W.prototype.toString=function(){var e=this.num.toString();return-1!==e.indexOf("e-")?function(e){for(var t=e.split("e-"),r=t[0].replace(".",""),n=Number(t[1]),o=0;o<n-1;o+=1)r="0"+r;return"0."+r}(e):-1!==e.indexOf("e")?function(e){for(var t=e.split("e"),r=t[0].replace(".",""),n=Number(t[1])+1-r.length,o=0;o<n;o+=1)r+="0";return r}(e):e},W.prototype.evaluate=function(e){return this},W.prototype.string=function(){return new X(this.toString())},W.prototype.number=function(){return this},W.prototype.bool=function(){return new j(this.num)},W.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")},W.prototype.stringValue=function(){return this.string().stringValue()},W.prototype.numberValue=function(){return this.num},W.prototype.booleanValue=function(){return this.bool().booleanValue()},W.prototype.negate=function(){return new W(-this.num)},W.prototype.equals=function(e){return $.instance_of(e,j)?this.bool().equals(e):$.instance_of(e,X)?this.equals(e.number()):$.instance_of(e,G)?e.compareWithNumber(this,F.equals):new j(this.num==e.num)},W.prototype.notequal=function(e){return $.instance_of(e,j)?this.bool().notequal(e):$.instance_of(e,X)?this.notequal(e.number()):$.instance_of(e,G)?e.compareWithNumber(this,F.notequal):new j(this.num!=e.num)},W.prototype.lessthan=function(e){return $.instance_of(e,G)?e.compareWithNumber(this,F.greaterthan):$.instance_of(e,j)||$.instance_of(e,X)?this.lessthan(e.number()):new j(this.num<e.num)},W.prototype.greaterthan=function(e){return $.instance_of(e,G)?e.compareWithNumber(this,F.lessthan):$.instance_of(e,j)||$.instance_of(e,X)?this.greaterthan(e.number()):new j(this.num>e.num)},W.prototype.lessthanorequal=function(e){return $.instance_of(e,G)?e.compareWithNumber(this,F.greaterthanorequal):$.instance_of(e,j)||$.instance_of(e,X)?this.lessthanorequal(e.number()):new j(this.num<=e.num)},W.prototype.greaterthanorequal=function(e){return $.instance_of(e,G)?e.compareWithNumber(this,F.lessthanorequal):$.instance_of(e,j)||$.instance_of(e,X)?this.greaterthanorequal(e.number()):new j(this.num>=e.num)},W.prototype.plus=function(e){return new W(this.num+e.num)},W.prototype.minus=function(e){return new W(this.num-e.num)},W.prototype.multiply=function(e){return new W(this.num*e.num)},W.prototype.div=function(e){return new W(this.num/e.num)},W.prototype.mod=function(e){return new W(this.num%e.num)},j.prototype=new g,j.prototype.constructor=j,j.superclass=g.prototype;function j(e){arguments.length>0&&this.init(e)}j.prototype.init=function(e){this.b=Boolean(e)},j.prototype.toString=function(){return this.b.toString()},j.prototype.evaluate=function(e){return this},j.prototype.string=function(){return new X(this.b)},j.prototype.number=function(){return new W(this.b)},j.prototype.bool=function(){return this},j.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")},j.prototype.stringValue=function(){return this.string().stringValue()},j.prototype.numberValue=function(){return this.number().numberValue()},j.prototype.booleanValue=function(){return this.b},j.prototype.not=function(){return new j(!this.b)},j.prototype.equals=function(e){return $.instance_of(e,X)||$.instance_of(e,W)?this.equals(e.bool()):$.instance_of(e,G)?e.compareWithBoolean(this,F.equals):new j(this.b==e.b)},j.prototype.notequal=function(e){return $.instance_of(e,X)||$.instance_of(e,W)?this.notequal(e.bool()):$.instance_of(e,G)?e.compareWithBoolean(this,F.notequal):new j(this.b!=e.b)},j.prototype.lessthan=function(e){return this.number().lessthan(e)},j.prototype.greaterthan=function(e){return this.number().greaterthan(e)},j.prototype.lessthanorequal=function(e){return this.number().lessthanorequal(e)},j.prototype.greaterthanorequal=function(e){return this.number().greaterthanorequal(e)},j.true_=new j(!0),j.false_=new j(!1),K.prototype=new Object,K.prototype.constructor=K,K.superclass=Object.prototype;function K(e){this.init(e)}K.prototype.init=function(e){this.left=null,this.right=null,this.node=e,this.depth=1},K.prototype.balance=function(){var e=null==this.left?0:this.left.depth,t=null==this.right?0:this.right.depth;if(e>t+1){(null==this.left.left?0:this.left.left.depth)<(null==this.left.right?0:this.left.right.depth)&&this.left.rotateRR(),this.rotateLL()}else if(e+1<t){var r=null==this.right.right?0:this.right.right.depth;(null==this.right.left?0:this.right.left.depth)>r&&this.right.rotateLL(),this.rotateRR()}},K.prototype.rotateLL=function(){var e=this.node,t=this.right;this.node=this.left.node,this.right=this.left,this.left=this.left.left,this.right.left=this.right.right,this.right.right=t,this.right.node=e,this.right.updateInNewLocation(),this.updateInNewLocation()},K.prototype.rotateRR=function(){var e=this.node,t=this.left;this.node=this.right.node,this.left=this.right,this.right=this.right.right,this.left.right=this.left.left,this.left.left=t,this.left.node=e,this.left.updateInNewLocation(),this.updateInNewLocation()},K.prototype.updateInNewLocation=function(){this.getDepthFromChildren()},K.prototype.getDepthFromChildren=function(){this.depth=null==this.node?0:1,null!=this.left&&(this.depth=this.left.depth+1),null!=this.right&&this.depth<=this.right.depth&&(this.depth=this.right.depth+1)};K.prototype.add=function(e){if(e===this.node)return!1;var t=function(e,t){if(e===t)return 0;if(e.compareDocumentPosition){var r=e.compareDocumentPosition(t);return 1&r?1:10&r?1:20&r?-1:0}for(var n=0,o=0,i=e;null!=i;i=i.parentNode||i.ownerElement)n++;for(var s=t;null!=s;s=s.parentNode||s.ownerElement)o++;if(n>o){for(;n>o;)e=e.parentNode||e.ownerElement,n--;if(e===t)return 1}else if(o>n){for(;o>n;)t=t.parentNode||t.ownerElement,o--;if(e===t)return-1}for(var a=e.parentNode||e.ownerElement,u=t.parentNode||t.ownerElement;a!==u;)t=u,a=(e=a).parentNode||e.ownerElement,u=t.parentNode||t.ownerElement;var c=$.isAttribute(e),l=$.isAttribute(t);if(c&&!l)return-1;if(!c&&l)return 1;if(a)for(var p=c?a.attributes:a.childNodes,h=p.length,f=0;f<h;f+=1){var m=p[f];if(m===e)return-1;if(m===t)return 1}throw new Error("Unexpected: could not determine node order")}(e,this.node),r=!1;return-1==t?null==this.left?(this.left=new K(e),r=!0):(r=this.left.add(e))&&this.balance():1==t&&(null==this.right?(this.right=new K(e),r=!0):(r=this.right.add(e))&&this.balance()),r&&this.getDepthFromChildren(),r},G.prototype=new g,G.prototype.constructor=G,G.superclass=g.prototype;function G(){this.init()}G.prototype.init=function(){this.tree=null,this.nodes=[],this.size=0},G.prototype.toString=function(){var e=this.first();return null==e?"":this.stringForNode(e)},G.prototype.evaluate=function(e){return this},G.prototype.string=function(){return new X(this.toString())},G.prototype.stringValue=function(){return this.toString()},G.prototype.number=function(){return new W(this.string())},G.prototype.numberValue=function(){return Number(this.string())},G.prototype.bool=function(){return new j(this.booleanValue())},G.prototype.booleanValue=function(){return!!this.size},G.prototype.nodeset=function(){return this},G.prototype.stringForNode=function(e){return 9==e.nodeType||1==e.nodeType||11===e.nodeType?this.stringForContainerNode(e):2===e.nodeType?e.value||e.nodeValue:e.isNamespaceNode?e.namespace:e.nodeValue},G.prototype.stringForContainerNode=function(e){for(var t="",r=e.firstChild;null!=r;r=r.nextSibling){var n=r.nodeType;1!==n&&3!==n&&4!==n&&9!==n&&11!==n||(t+=this.stringForNode(r))}return t},G.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new K(this.nodes[0]);for(var e=1;e<this.nodes.length;e+=1)this.tree.add(this.nodes[e])}return this.tree},G.prototype.first=function(){var e=this.buildTree();if(null==e)return null;for(;null!=e.left;)e=e.left;return e.node},G.prototype.add=function(e){for(var t=0;t<this.nodes.length;t+=1)if(e===this.nodes[t])return;this.tree=null,this.nodes.push(e),this.size+=1},G.prototype.addArray=function(e){var t=this;r(function(e){t.add(e)},e)},G.prototype.toArray=function(){var e=[];return this.toArrayRec(this.buildTree(),e),e},G.prototype.toArrayRec=function(e,t){null!=e&&(this.toArrayRec(e.left,t),t.push(e.node),this.toArrayRec(e.right,t))},G.prototype.toUnsortedArray=function(){return this.nodes.slice()},G.prototype.compareWithString=function(e,t){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++){var o=r[n],i=t(new X(this.stringForNode(o)),e);if(i.booleanValue())return i}return new j(!1)},G.prototype.compareWithNumber=function(e,t){for(var r=this.toUnsortedArray(),n=0;n<r.length;n++){var o=r[n],i=t(new W(this.stringForNode(o)),e);if(i.booleanValue())return i}return new j(!1)},G.prototype.compareWithBoolean=function(e,t){return t(this.bool(),e)},G.prototype.compareWithNodeSet=function(e,t){for(var r=this.toUnsortedArray(),n=function(e,r){return t(r,e)},o=0;o<r.length;o++){var i=new X(this.stringForNode(r[o])),s=e.compareWithString(i,n);if(s.booleanValue())return s}return new j(!1)},G.compareWith=t(function(e,t){return $.instance_of(t,X)?this.compareWithString(t,e):$.instance_of(t,W)?this.compareWithNumber(t,e):$.instance_of(t,j)?this.compareWithBoolean(t,e):this.compareWithNodeSet(t,e)}),G.prototype.equals=G.compareWith(F.equals),G.prototype.notequal=G.compareWith(F.notequal),G.prototype.lessthan=G.compareWith(F.lessthan),G.prototype.greaterthan=G.compareWith(F.greaterthan),G.prototype.lessthanorequal=G.compareWith(F.lessthanorequal),G.prototype.greaterthanorequal=G.compareWith(F.greaterthanorequal),G.prototype.union=function(e){var t=new G;return t.addArray(this.toUnsortedArray()),t.addArray(e.toUnsortedArray()),t},k.prototype=new Object,k.prototype.constructor=k,k.superclass=Object.prototype;function k(e,t,r){this.isXPathNamespace=!0,this.ownerDocument=r.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.namespaceURI=t,this.nodeValue=t,this.ownerElement=r,this.nodeType=k.XPATH_NAMESPACE_NODE}k.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'},Y.prototype=new Object,Y.prototype.constructor=Y,Y.superclass=Object.prototype;function Y(e,t,r){this.variableResolver=null!=e?e:new q,this.namespaceResolver=null!=t?t:new J,this.functionResolver=null!=r?r:new Q}Y.prototype.extend=function(e){return h(new Y,this,e)},q.prototype=new Object,q.prototype.constructor=q,q.superclass=Object.prototype;function q(){}q.prototype.getVariable=function(e,t){return null},Q.prototype=new Object,Q.prototype.constructor=Q,Q.superclass=Object.prototype;function Q(e){this.thisArg=null!=e?e:z,this.functions=new Object,this.addStandardFunctions()}Q.prototype.addStandardFunctions=function(){this.functions["{}last"]=z.last,this.functions["{}position"]=z.position,this.functions["{}count"]=z.count,this.functions["{}id"]=z.id,this.functions["{}local-name"]=z.localName,this.functions["{}namespace-uri"]=z.namespaceURI,this.functions["{}name"]=z.name,this.functions["{}string"]=z.string,this.functions["{}concat"]=z.concat,this.functions["{}starts-with"]=z.startsWith,this.functions["{}contains"]=z.contains,this.functions["{}substring-before"]=z.substringBefore,this.functions["{}substring-after"]=z.substringAfter,this.functions["{}substring"]=z.substring,this.functions["{}string-length"]=z.stringLength,this.functions["{}normalize-space"]=z.normalizeSpace,this.functions["{}translate"]=z.translate,this.functions["{}boolean"]=z.boolean_,this.functions["{}not"]=z.not,this.functions["{}true"]=z.true_,this.functions["{}false"]=z.false_,this.functions["{}lang"]=z.lang,this.functions["{}number"]=z.number,this.functions["{}sum"]=z.sum,this.functions["{}floor"]=z.floor,this.functions["{}ceiling"]=z.ceiling,this.functions["{}round"]=z.round},Q.prototype.addFunction=function(e,t,r){this.functions["{"+e+"}"+t]=r},Q.getFunctionFromContext=function(e,t){var r=$.resolveQName(e,t.namespaceResolver,t.contextNode,!1);if(null===r[0])throw new Error("Cannot resolve QName "+name);return t.functionResolver.getFunction(r[1],r[0])},Q.prototype.getFunction=function(e,t){return this.functions["{"+t+"}"+e]},J.prototype=new Object,J.prototype.constructor=J,J.superclass=Object.prototype;function J(){}J.prototype.getNamespace=function(e,t){if("xml"==e)return m.XML_NAMESPACE_URI;if("xmlns"==e)return m.XMLNS_NAMESPACE_URI;for(9==t.nodeType?t=t.documentElement:2==t.nodeType?t=U.getOwnerElement(t):1!=t.nodeType&&(t=t.parentNode);null!=t&&1==t.nodeType;){for(var r=t.attributes,n=0;n<r.length;n++){var o=r.item(n),i=o.name||o.nodeName;if("xmlns"===i&&""===e||i==="xmlns:"+e)return String(o.value||o.nodeValue)}t=t.parentNode}return null};var z=new Object;z.last=function(e){if(1!=arguments.length)throw new Error("Function last expects ()");return new W(e.contextSize)},z.position=function(e){if(1!=arguments.length)throw new Error("Function position expects ()");return new W(e.contextPosition)},z.count=function(){var e,t=arguments[0];if(2!=arguments.length||!$.instance_of(e=arguments[1].evaluate(t),G))throw new Error("Function count expects (node-set)");return new W(e.size)},z.id=function(){var e,t=arguments[0];if(2!=arguments.length)throw new Error("Function id expects (object)");e=arguments[1].evaluate(t);for(var r=(e=$.instance_of(e,G)?e.toArray().join(" "):e.stringValue()).split(/[\x0d\x0a\x09\x20]+/),n=new G,o=9==t.contextNode.nodeType?t.contextNode:t.contextNode.ownerDocument,i=0;i<r.length;i++){var s;null!=(s=o.getElementById?o.getElementById(r[i]):$.getElementById(o,r[i]))&&(n.add(s),0)}return n},z.localName=function(e,t){var r;if(1==arguments.length)r=e.contextNode;else{if(2!=arguments.length)throw new Error("Function local-name expects (node-set?)");r=t.evaluate(e).first()}return new X(null==r?"":r.localName||r.baseName||r.target||r.nodeName||"")},z.namespaceURI=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function namespace-uri expects (node-set?)");e=arguments[1].evaluate(t).first()}return new X(null==e?"":e.namespaceURI)},z.name=function(){var e,t=arguments[0];if(1==arguments.length)e=t.contextNode;else{if(2!=arguments.length)throw new Error("Function name expects (node-set?)");e=arguments[1].evaluate(t).first()}return null==e?new X(""):1==e.nodeType?new X(e.nodeName):2==e.nodeType?new X(e.name||e.nodeName):7===e.nodeType?new X(e.target||e.nodeName):null==e.localName?new X(""):new X(e.localName)},z.string=function(){var e=arguments[0];if(1==arguments.length)return new X(G.prototype.stringForNode(e.contextNode));if(2==arguments.length)return arguments[1].evaluate(e).string();throw new Error("Function string expects (object?)")},z.concat=function(e){if(arguments.length<3)throw new Error("Function concat expects (string, string[, string]*)");for(var t="",r=1;r<arguments.length;r++)t+=arguments[r].evaluate(e).stringValue();return new X(t)},z.startsWith=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function startsWith expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new j(t.substring(0,r.length)==r)},z.contains=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function contains expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new j(-1!==t.indexOf(r))},z.substringBefore=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function substring-before expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();return new X(t.substring(0,t.indexOf(r)))},z.substringAfter=function(){var e=arguments[0];if(3!=arguments.length)throw new Error("Function substring-after expects (string, string)");var t=arguments[1].evaluate(e).stringValue(),r=arguments[2].evaluate(e).stringValue();if(0==r.length)return new X(t);var n=t.indexOf(r);return new X(-1==n?"":t.substring(n+r.length))},z.substring=function(){var e=arguments[0];if(3!=arguments.length&&4!=arguments.length)throw new Error("Function substring expects (string, number, number?)");var t=arguments[1].evaluate(e).stringValue(),r=Math.round(arguments[2].evaluate(e).numberValue())-1,n=4==arguments.length?r+Math.round(arguments[3].evaluate(e).numberValue()):void 0;return new X(t.substring(r,n))},z.stringLength=function(){var e,t=arguments[0];if(1==arguments.length)e=G.prototype.stringForNode(t.contextNode);else{if(2!=arguments.length)throw new Error("Function string-length expects (string?)");e=arguments[1].evaluate(t).stringValue()}return new W(e.length)},z.normalizeSpace=function(){var e,t=arguments[0];if(1==arguments.length)e=G.prototype.stringForNode(t.contextNode);else{if(2!=arguments.length)throw new Error("Function normalize-space expects (string?)");e=arguments[1].evaluate(t).stringValue()}for(var r=0,n=e.length-1;$.isSpace(e.charCodeAt(n));)n--;for(var o="";r<=n&&$.isSpace(e.charCodeAt(r));)r++;for(;r<=n;)if($.isSpace(e.charCodeAt(r)))for(o+=" ";r<=n&&$.isSpace(e.charCodeAt(r));)r++;else o+=e.charAt(r),r++;return new X(o)},z.translate=function(e,t,r,i){if(4!=arguments.length)throw new Error("Function translate expects (string, string, string)");var s=t.evaluate(e).stringValue(),a=r.evaluate(e).stringValue(),u=i.evaluate(e).stringValue(),c=n(function(e,t,r){return t in e||(e[t]=r>u.length?"":u[r]),e},{},a);return new X(l("",o(function(e){return e in c?c[e]:e},s)))},z.boolean_=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function boolean expects (object)");return arguments[1].evaluate(e).bool()},z.not=function(e,t){if(2!=arguments.length)throw new Error("Function not expects (object)");return t.evaluate(e).bool().not()},z.true_=function(){if(1!=arguments.length)throw new Error("Function true expects ()");return j.true_},z.false_=function(){if(1!=arguments.length)throw new Error("Function false expects ()");return j.false_},z.lang=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function lang expects (string)");for(var t,r=e.contextNode;null!=r&&9!=r.nodeType;r=r.parentNode){var n=r.getAttributeNS(m.XML_NAMESPACE_URI,"lang");if(null!=n){t=String(n);break}}if(null==t)return j.false_;var o=arguments[1].evaluate(e).stringValue();return new j(t.substring(0,o.length)==o&&(t.length==o.length||"-"==t.charAt(o.length)))},z.number=function(){var e=arguments[0];if(1!=arguments.length&&2!=arguments.length)throw new Error("Function number expects (object?)");return 1==arguments.length?new W(G.prototype.stringForNode(e.contextNode)):arguments[1].evaluate(e).number()},z.sum=function(){var e,t=arguments[0];if(2!=arguments.length||!$.instance_of(e=arguments[1].evaluate(t),G))throw new Error("Function sum expects (node-set)");e=e.toUnsortedArray();for(var r=0,n=0;n<e.length;n++)r+=new W(G.prototype.stringForNode(e[n])).numberValue();return new W(r)},z.floor=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function floor expects (number)");return new W(Math.floor(arguments[1].evaluate(e).numberValue()))},z.ceiling=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function ceiling expects (number)");return new W(Math.ceil(arguments[1].evaluate(e).numberValue()))},z.round=function(){var e=arguments[0];if(2!=arguments.length)throw new Error("Function round expects (number)");return new W(Math.round(arguments[1].evaluate(e).numberValue()))};var $=new Object;$.isAttribute=function(e){return e&&(2===e.nodeType||e.ownerElement)},$.splitQName=function(e){var t=e.indexOf(":");return-1==t?[null,e]:[e.substring(0,t),e.substring(t+1)]},$.resolveQName=function(e,t,r,n){var o=$.splitQName(e);return null!=o[0]?o[0]=t.getNamespace(o[0],r):n?(o[0]=t.getNamespace("",r),null==o[0]&&(o[0]="")):o[0]="",o},$.isSpace=function(e){return 9==e||13==e||10==e||32==e},$.isLetter=function(e){return e>=65&&e<=90||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=255||e>=256&&e<=305||e>=308&&e<=318||e>=321&&e<=328||e>=330&&e<=382||e>=384&&e<=451||e>=461&&e<=496||e>=500&&e<=501||e>=506&&e<=535||e>=592&&e<=680||e>=699&&e<=705||902==e||e>=904&&e<=906||908==e||e>=910&&e<=929||e>=931&&e<=974||e>=976&&e<=982||986==e||988==e||990==e||992==e||e>=994&&e<=1011||e>=1025&&e<=1036||e>=1038&&e<=1103||e>=1105&&e<=1116||e>=1118&&e<=1153||e>=1168&&e<=1220||e>=1223&&e<=1224||e>=1227&&e<=1228||e>=1232&&e<=1259||e>=1262&&e<=1269||e>=1272&&e<=1273||e>=1329&&e<=1366||1369==e||e>=1377&&e<=1414||e>=1488&&e<=1514||e>=1520&&e<=1522||e>=1569&&e<=1594||e>=1601&&e<=1610||e>=1649&&e<=1719||e>=1722&&e<=1726||e>=1728&&e<=1742||e>=1744&&e<=1747||1749==e||e>=1765&&e<=1766||e>=2309&&e<=2361||2365==e||e>=2392&&e<=2401||e>=2437&&e<=2444||e>=2447&&e<=2448||e>=2451&&e<=2472||e>=2474&&e<=2480||2482==e||e>=2486&&e<=2489||e>=2524&&e<=2525||e>=2527&&e<=2529||e>=2544&&e<=2545||e>=2565&&e<=2570||e>=2575&&e<=2576||e>=2579&&e<=2600||e>=2602&&e<=2608||e>=2610&&e<=2611||e>=2613&&e<=2614||e>=2616&&e<=2617||e>=2649&&e<=2652||2654==e||e>=2674&&e<=2676||e>=2693&&e<=2699||2701==e||e>=2703&&e<=2705||e>=2707&&e<=2728||e>=2730&&e<=2736||e>=2738&&e<=2739||e>=2741&&e<=2745||2749==e||2784==e||e>=2821&&e<=2828||e>=2831&&e<=2832||e>=2835&&e<=2856||e>=2858&&e<=2864||e>=2866&&e<=2867||e>=2870&&e<=2873||2877==e||e>=2908&&e<=2909||e>=2911&&e<=2913||e>=2949&&e<=2954||e>=2958&&e<=2960||e>=2962&&e<=2965||e>=2969&&e<=2970||2972==e||e>=2974&&e<=2975||e>=2979&&e<=2980||e>=2984&&e<=2986||e>=2990&&e<=2997||e>=2999&&e<=3001||e>=3077&&e<=3084||e>=3086&&e<=3088||e>=3090&&e<=3112||e>=3114&&e<=3123||e>=3125&&e<=3129||e>=3168&&e<=3169||e>=3205&&e<=3212||e>=3214&&e<=3216||e>=3218&&e<=3240||e>=3242&&e<=3251||e>=3253&&e<=3257||3294==e||e>=3296&&e<=3297||e>=3333&&e<=3340||e>=3342&&e<=3344||e>=3346&&e<=3368||e>=3370&&e<=3385||e>=3424&&e<=3425||e>=3585&&e<=3630||3632==e||e>=3634&&e<=3635||e>=3648&&e<=3653||e>=3713&&e<=3714||3716==e||e>=3719&&e<=3720||3722==e||3725==e||e>=3732&&e<=3735||e>=3737&&e<=3743||e>=3745&&e<=3747||3749==e||3751==e||e>=3754&&e<=3755||e>=3757&&e<=3758||3760==e||e>=3762&&e<=3763||3773==e||e>=3776&&e<=3780||e>=3904&&e<=3911||e>=3913&&e<=3945||e>=4256&&e<=4293||e>=4304&&e<=4342||4352==e||e>=4354&&e<=4355||e>=4357&&e<=4359||4361==e||e>=4363&&e<=4364||e>=4366&&e<=4370||4412==e||4414==e||4416==e||4428==e||4430==e||4432==e||e>=4436&&e<=4437||4441==e||e>=4447&&e<=4449||4451==e||4453==e||4455==e||4457==e||e>=4461&&e<=4462||e>=4466&&e<=4467||4469==e||4510==e||4520==e||4523==e||e>=4526&&e<=4527||e>=4535&&e<=4536||4538==e||e>=4540&&e<=4546||4587==e||4592==e||4601==e||e>=7680&&e<=7835||e>=7840&&e<=7929||e>=7936&&e<=7957||e>=7960&&e<=7965||e>=7968&&e<=8005||e>=8008&&e<=8013||e>=8016&&e<=8023||8025==e||8027==e||8029==e||e>=8031&&e<=8061||e>=8064&&e<=8116||e>=8118&&e<=8124||8126==e||e>=8130&&e<=8132||e>=8134&&e<=8140||e>=8144&&e<=8147||e>=8150&&e<=8155||e>=8160&&e<=8172||e>=8178&&e<=8180||e>=8182&&e<=8188||8486==e||e>=8490&&e<=8491||8494==e||e>=8576&&e<=8578||e>=12353&&e<=12436||e>=12449&&e<=12538||e>=12549&&e<=12588||e>=44032&&e<=55203||e>=19968&&e<=40869||12295==e||e>=12321&&e<=12329},$.isNCNameChar=function(e){return e>=48&&e<=57||e>=1632&&e<=1641||e>=1776&&e<=1785||e>=2406&&e<=2415||e>=2534&&e<=2543||e>=2662&&e<=2671||e>=2790&&e<=2799||e>=2918&&e<=2927||e>=3047&&e<=3055||e>=3174&&e<=3183||e>=3302&&e<=3311||e>=3430&&e<=3439||e>=3664&&e<=3673||e>=3792&&e<=3801||e>=3872&&e<=3881||46==e||45==e||95==e||$.isLetter(e)||e>=768&&e<=837||e>=864&&e<=865||e>=1155&&e<=1158||e>=1425&&e<=1441||e>=1443&&e<=1465||e>=1467&&e<=1469||1471==e||e>=1473&&e<=1474||1476==e||e>=1611&&e<=1618||1648==e||e>=1750&&e<=1756||e>=1757&&e<=1759||e>=1760&&e<=1764||e>=1767&&e<=1768||e>=1770&&e<=1773||e>=2305&&e<=2307||2364==e||e>=2366&&e<=2380||2381==e||e>=2385&&e<=2388||e>=2402&&e<=2403||e>=2433&&e<=2435||2492==e||2494==e||2495==e||e>=2496&&e<=2500||e>=2503&&e<=2504||e>=2507&&e<=2509||2519==e||e>=2530&&e<=2531||2562==e||2620==e||2622==e||2623==e||e>=2624&&e<=2626||e>=2631&&e<=2632||e>=2635&&e<=2637||e>=2672&&e<=2673||e>=2689&&e<=2691||2748==e||e>=2750&&e<=2757||e>=2759&&e<=2761||e>=2763&&e<=2765||e>=2817&&e<=2819||2876==e||e>=2878&&e<=2883||e>=2887&&e<=2888||e>=2891&&e<=2893||e>=2902&&e<=2903||e>=2946&&e<=2947||e>=3006&&e<=3010||e>=3014&&e<=3016||e>=3018&&e<=3021||3031==e||e>=3073&&e<=3075||e>=3134&&e<=3140||e>=3142&&e<=3144||e>=3146&&e<=3149||e>=3157&&e<=3158||e>=3202&&e<=3203||e>=3262&&e<=3268||e>=3270&&e<=3272||e>=3274&&e<=3277||e>=3285&&e<=3286||e>=3330&&e<=3331||e>=3390&&e<=3395||e>=3398&&e<=3400||e>=3402&&e<=3405||3415==e||3633==e||e>=3636&&e<=3642||e>=3655&&e<=3662||3761==e||e>=3764&&e<=3769||e>=3771&&e<=3772||e>=3784&&e<=3789||e>=3864&&e<=3865||3893==e||3895==e||3897==e||3902==e||3903==e||e>=3953&&e<=3972||e>=3974&&e<=3979||e>=3984&&e<=3989||3991==e||e>=3993&&e<=4013||e>=4017&&e<=4023||4025==e||e>=8400&&e<=8412||8417==e||e>=12330&&e<=12335||12441==e||12442==e||183==e||720==e||721==e||903==e||1600==e||3654==e||3782==e||12293==e||e>=12337&&e<=12341||e>=12445&&e<=12446||e>=12540&&e<=12542},$.coalesceText=function(e){for(var t=e.firstChild;null!=t;t=t.nextSibling)if(3==t.nodeType||4==t.nodeType){var r=t.nodeValue,n=t;for(t=t.nextSibling;null!=t&&(3==t.nodeType||4==t.nodeType);){r+=t.nodeValue;var o=t;t=t.nextSibling,o.parentNode.removeChild(o)}if(4==n.nodeType){var i=n.parentNode;if(null==n.nextSibling)i.removeChild(n),i.appendChild(i.ownerDocument.createTextNode(r));else{var s=n.nextSibling;i.removeChild(n),i.insertBefore(i.ownerDocument.createTextNode(r),s)}}else n.nodeValue=r;if(null==t)break}else 1==t.nodeType&&$.coalesceText(t)},$.instance_of=function(e,t){for(;null!=e;){if(e.constructor===t)return!0;if(e===Object)return!1;e=e.constructor.superclass}return!1},$.getElementById=function(e,t){if(1==e.nodeType&&(e.getAttribute("id")==t||e.getAttributeNS(null,"id")==t))return e;for(var r=e.firstChild;null!=r;r=r.nextSibling){var n=$.getElementById(r,t);if(null!=n)return n}return null};var Z=function(){function e(t,r,n){var o=Error.call(this,function(t,r){var n=r?": "+r.toString():"";switch(t){case e.INVALID_EXPRESSION_ERR:return"Invalid expression"+n;case e.TYPE_ERR:return"Type error"+n}return null}(t,r)||n);return o.code=t,o.exception=r,o}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e.superclass=Error,e.prototype.toString=function(){return this.message},e.fromMessage=function(t,r){return new e(null,r,t)},e.INVALID_EXPRESSION_ERR=51,e.TYPE_ERR=52,e}();ee.prototype={},ee.prototype.constructor=ee,ee.superclass=Object.prototype;function ee(e,t,r){this.xpath=r.parse(e),this.context=new Y,this.context.namespaceResolver=new te(t)}ee.getOwnerDocument=function(e){return 9===e.nodeType?e:e.ownerDocument},ee.detectHtmlDom=function(e){if(!e)return!1;var t=ee.getOwnerDocument(e);try{return t.implementation.hasFeature("HTML","2.0")}catch(e){return!0}},ee.prototype.evaluate=function(e,t,r){this.context.expressionContextNode=e,this.context.caseInsensitive=ee.detectHtmlDom(e);return new ne(this.xpath.evaluate(this.context),t)},te.prototype={},te.prototype.constructor=te,te.superclass=Object.prototype;function te(e){this.xpathNSResolver=e}te.prototype.getNamespace=function(e,t){return null==this.xpathNSResolver?null:this.xpathNSResolver.lookupNamespaceURI(e)},re.prototype={},re.prototype.constructor=re,re.superclass=Object.prototype;function re(e){this.node=e,this.namespaceResolver=new J}re.prototype.lookupNamespaceURI=function(e){return this.namespaceResolver.getNamespace(e,this.node)},ne.prototype={},ne.prototype.constructor=ne,ne.superclass=Object.prototype;function ne(e,t){switch(t==ne.ANY_TYPE&&(e.constructor===X?t=ne.STRING_TYPE:e.constructor===W?t=ne.NUMBER_TYPE:e.constructor===j?t=ne.BOOLEAN_TYPE:e.constructor===G&&(t=ne.UNORDERED_NODE_ITERATOR_TYPE)),this.resultType=t,t){case ne.NUMBER_TYPE:return void(this.numberValue=e.numberValue());case ne.STRING_TYPE:return void(this.stringValue=e.stringValue());case ne.BOOLEAN_TYPE:return void(this.booleanValue=e.booleanValue());case ne.ANY_UNORDERED_NODE_TYPE:case ne.FIRST_ORDERED_NODE_TYPE:if(e.constructor===G)return void(this.singleNodeValue=e.first());break;case ne.UNORDERED_NODE_ITERATOR_TYPE:case ne.ORDERED_NODE_ITERATOR_TYPE:if(e.constructor===G)return this.invalidIteratorState=!1,this.nodes=e.toArray(),void(this.iteratorIndex=0);break;case ne.UNORDERED_NODE_SNAPSHOT_TYPE:case ne.ORDERED_NODE_SNAPSHOT_TYPE:if(e.constructor===G)return this.nodes=e.toArray(),void(this.snapshotLength=this.nodes.length)}throw new Z(Z.TYPE_ERR)}ne.prototype.iterateNext=function(){if(this.resultType!=ne.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=ne.ORDERED_NODE_ITERATOR_TYPE)throw new Z(Z.TYPE_ERR);return this.nodes[this.iteratorIndex++]},ne.prototype.snapshotItem=function(e){if(this.resultType!=ne.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=ne.ORDERED_NODE_SNAPSHOT_TYPE)throw new Z(Z.TYPE_ERR);return this.nodes[e]},ne.ANY_TYPE=0,ne.NUMBER_TYPE=1,ne.STRING_TYPE=2,ne.BOOLEAN_TYPE=3,ne.UNORDERED_NODE_ITERATOR_TYPE=4,ne.ORDERED_NODE_ITERATOR_TYPE=5,ne.UNORDERED_NODE_SNAPSHOT_TYPE=6,ne.ORDERED_NODE_SNAPSHOT_TYPE=7,ne.ANY_UNORDERED_NODE_TYPE=8,ne.FIRST_ORDERED_NODE_TYPE=9;function oe(e,t){e.createExpression=function(e,r){try{return new ee(e,r,t)}catch(e){throw new Z(Z.INVALID_EXPRESSION_ERR,e)}},e.createNSResolver=function(e){return new re(e)},e.evaluate=function(r,n,o,i,s){if(i<0||i>9)throw{code:0,toString:function(){return"Request type not supported"}};return e.createExpression(r,o,t).evaluate(n,i,s)}}try{var ie=!0;try{document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)&&(ie=!1)}catch(e){}ie&&oe(document,new f)}catch(e){}oe(e,new f),function(){var t=new f,r=new J,n=new Q,o=new q;function i(e){return{getNamespace:function(t,n){return e(t,n)||r.getNamespace(t,n)}}}function s(e){if(e&&"function"==typeof e.getNamespace)return i((t=e).getNamespace.bind(t));var t;if("function"==typeof e)return i(e);if("object"==typeof e)return n=e,i(function(e){return n[e]});var n;return r}function a(e){if(null===e||void 0===e||e instanceof X||e instanceof j||e instanceof W||e instanceof G)return e;switch(typeof e){case"string":return new X(e);case"boolean":return new j(e);case"number":return new W(e)}var t=new G;return t.addArray([].concat(e)),t}function u(e){return{getFunction:function(t,r){var o=e(t,r);if(o)return i=o,function(e){var t=Array.prototype.slice.call(arguments,1).map(function(t){return t.evaluate(e)});return a(i.apply(this,[].concat(e,t)))};var i;return n.getFunction(t,r)}}}function c(e){if(e&&"function"==typeof e.getFunction)return u((t=e).getFunction.bind(t));var t;if("function"==typeof e)return u(e);if("object"==typeof e)return r=e,u(function(e){return r[e]});var r;return n}function l(e){return{getVariable:function(t,r){return a(e(t,r))}}}function p(e,t,r){e in r&&(t[e]=r[e])}function h(e){var t=new Y;return e?(t.namespaceResolver=s(e.namespaces),t.functionResolver=c(e.functions),t.variableResolver=function(e){if(e){if("function"==typeof e.getVariable)return l(e.getVariable.bind(e));if("function"==typeof e)return l(e);if("object"==typeof e)return l(function(t){return e[t]})}return o}(e.variables),t.expressionContextNode=e.node,p("allowAnyNamespaceForNoPrefix",t,e),p("isHtml",t,e)):t.namespaceResolver=r,t}var m={evaluate:function(e){return function(e,t){var r=h(t);return e.evaluate(r)}(this.expression,e)},evaluateNumber:function(e){return this.evaluate(e).numberValue()},evaluateString:function(e){return this.evaluate(e).stringValue()},evaluateBoolean:function(e){return this.evaluate(e).booleanValue()},evaluateNodeSet:function(e){return this.evaluate(e).nodeset()},select:function(e){return this.evaluateNodeSet(e).toArray()},select1:function(e){return this.select(e)[0]}};e.parse=function(e){var r=t.parse(e);return Object.create(m,{expression:{value:r}})}}(),e.XPath=m,e.XPathParser=f,e.XPathResult=ne,e.Step=_,e.NodeTest=V,e.BarOperation=D,e.NamespaceResolver=J,e.FunctionResolver=Q,e.VariableResolver=q,e.Utilities=$,e.XPathContext=Y,e.XNodeSet=G,e.XBoolean=j,e.XString=X,e.XNumber=W,e.select=function(t,r,n){return e.selectWithResolver(t,r,null,n)},e.useNamespaces=function(t){var r={mappings:t||{},lookupNamespaceURI:function(e){return this.mappings[e]}};return function(t,n,o){return e.selectWithResolver(t,n,r,o)}},e.selectWithResolver=function(e,t,r,n){var o=new ee(e,r,new f),i=ne.ANY_TYPE,s=o.evaluate(t,i,null);return s.resultType==ne.STRING_TYPE?s=s.stringValue:s.resultType==ne.NUMBER_TYPE?s=s.numberValue:s.resultType==ne.BOOLEAN_TYPE?s=s.booleanValue:(s=s.nodes,n&&(s=s[0])),s},e.select1=function(t,r){return e.select(t,r,!0)}}(xpath),function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){var n=e("./lib/algorithm/exclusive-canonicalisation"),o={algorithms:{"http://www.w3.org/2001/10/xml-exc-c14n#":function(e){return new n(e)},"http://www.w3.org/2001/10/xml-exc-c14n#WithComments":function(e){return(e=Object.create(e||null)).includeComments=!0,new n(e)}}},i=t.exports=function e(){if(!(this instanceof e))return new e;this.algorithms=Object.create(o.algorithms)};i.prototype.registerAlgorithm=function(e,t){return this.algorithms[e]=t,this},i.prototype.getAlgorithm=function(e){return this.algorithms[e]},i.prototype.createCanonicaliser=function(e,t){return this.algorithms[e](t)}},{"./lib/algorithm/exclusive-canonicalisation":3}],2:[function(e,t,r){var n=t.exports=function(e){};n.prototype.name=function(){return null},n.prototype.canonicalise=function(e,t){setImmediate(function(){return t(Error("not implemented"))})}},{}],3:[function(e,t,r){var n=e("../escape"),o=e("../algorithm"),i=t.exports=function(e){o.call(this,e),e=e||{},this.includeComments=!!e.includeComments,this.inclusiveNamespaces=e.inclusiveNamespaces||[]};i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype.name=function(){return"http://www.w3.org/2001/10/xml-exc-c14n#"+(this.includeComments?"WithComments":"")},i.prototype.canonicalise=function(e,t){var r=this;setImmediate(function(){try{var n=r._processInner(e)}catch(e){return t(e)}return t(null,n)})},i.prototype.getIncludeComments=function(){return!!this.includeComments},i.prototype.setIncludeComments=function(e){this.includeComments=!!e},i.prototype.getInclusiveNamespaces=function(){return this.inclusiveNamespaces.slice()},i.prototype.setInclusiveNamespaces=function(e){return this.inclusiveNamespaces=e.slice(),this},i.prototype.addInclusiveNamespace=function(e){return this.inclusiveNamespaces.push(e),this};var s=function(e,t){return!e.prefix&&t.prefix?-1:!t.prefix&&e.prefix?1:e.name.localeCompare(t.name)},a=function(e,t){var r=e.prefix+e.namespaceURI,n=t.prefix+t.namespaceURI;return r===n?0:r.localeCompare(n)};i.prototype._renderAttributes=function(e){return(e.attributes?[].slice.call(e.attributes):[]).filter(function(e){return 0!==e.name.indexOf("xmlns")}).sort(s).map(function(e){return" "+e.name+'="'+n.attributeEntities(e.value)+'"'}).join("")},i.prototype._renderNamespace=function(e,t,r){var o="",i=r,s=t.slice(),u=[],c=e.namespaceURI||"";if(e.prefix){if((h=s.filter(function(t){return t.prefix===e.prefix}).shift())&&h.namespaceURI!==e.namespaceURI){for(var l=0;l<s.length;++l)s[l].prefix===e.prefix&&s.splice(l--,1);h=null}h||(u.push({prefix:e.prefix,namespaceURI:e.namespaceURI}),s.push({prefix:e.prefix,namespaceURI:e.namespaceURI}))}else r!==c&&(i=c,o+=' xmlns="'+n.attributeEntities(i)+'"');if(e.attributes)for(l=0;l<e.attributes.length;l++){var p=e.attributes[l],h=null;if(p.prefix&&"xmlns"!==p.prefix&&(h=s.filter(function(e){return e.prefix===p.prefix}).shift())&&h.namespaceURI!==p.namespaceURI){for(l=0;l<s.length;++l)s[l].prefix===p.prefix&&s.splice(l--,1);h=null}p.prefix&&!h&&"xmlns"!==p.prefix?(u.push({prefix:p.prefix,namespaceURI:p.namespaceURI}),s.push({prefix:p.prefix,namespaceURI:p.namespaceURI})):p.prefix&&"xmlns"===p.prefix&&-1!==this.inclusiveNamespaces.indexOf(p.localName)&&u.push({prefix:p.localName,namespaceURI:p.nodeValue})}u.sort(a);for(l=0;l<u.length;++l)o+=" xmlns:"+u[l].prefix+'="'+n.attributeEntities(u[l].namespaceURI)+'"';return{rendered:o,newDefaultNamespace:i,newPrefixesInScope:s}},i.prototype._renderComment=function(e){var t=null,r=null;if(e.ownerDocument===e.parentNode){for(var o=e,i=e;null!==o;){if(o===e.ownerDocument.documentElement){t=!0;break}o=o.nextSibling}for(;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.previousSibling}}return(r?"\n":"")+"\x3c!--"+n.textEntities(e.data)+"--\x3e"+(t?"\n":"")},i.prototype._renderProcessingInstruction=function(e){if("xml"===e.tagName)return"";var t=null,r=null;if(e.ownerDocument===e.parentNode){for(var o=e,i=e;null!==o;){if(o===e.ownerDocument.documentElement){t=!0;break}o=o.nextSibling}for(;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.previousSibling}}return(r?"\n":"")+"<?"+e.tagName+(e.data?" "+n.textEntities(e.data):"")+"?>"+(t?"\n":"")},i.prototype._processInner=function(e,t,r){if(r=r||"",t=t||[],3===e.nodeType)return e.ownerDocument===e.parentNode?n.textEntities(e.data.trim()):n.textEntities(e.data);if(7===e.nodeType)return this._renderProcessingInstruction(e);if(8===e.nodeType)return this.includeComments?this._renderComment(e):"";if(10===e.nodeType)return"";var o=this._renderNamespace(e,t,r),i=this;return[e.tagName?"<"+e.tagName+o.rendered+this._renderAttributes(e)+">":"",[].slice.call(e.childNodes).map(function(e){return i._processInner(e,o.newPrefixesInScope,o.newDefaultNamespace)}).join(""),e.tagName?"</"+e.tagName+">":""].join("")}},{"../algorithm":2,"../escape":4}],4:[function(e,t,r){var n=r.entities={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","\t":"&#x9;","\n":"&#xA;","\r":"&#xD;"};r.attributeEntities=function(e){return e.replace(/([\&<"\t\n\r])/g,function(e){return n[e]})},r.textEntities=function(e){return e.replace(/([\&<>\r])/g,function(e){return n[e]})}},{}]},{},[1]),function(){window.Helper=function(){function e(){}return e.base64ToArrayBuffer=function(e){var t,r,n,o,i,s;for(i=(t=window.atob(e)).length,r=new Uint8Array(i),n=o=0,s=i-1;0<=s?o<=s:o>=s;n=0<=s?++o:--o)r[n]=t.charCodeAt(n);return r.buffer},e.base64ToBase64URL=function(e){return e=(e=(e=(e=(e=e.split("=").toString()).split("+").join("-").toString()).split("/").join("_").toString()).split(",").join("").toString()).trim()},e.arrayBufferToBase64=function(e){var t,r,n,o,i,s,a,u,c;return s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=(o=new Uint8Array(e)).byteLength,c=r-(n=r%3),a=function(e){var t;return t=o[e]<<16|o[e+1]<<8|o[e+2],s[(16515072&t)>>18]+s[(258048&t)>>12]+s[(4032&t)>>6]+s[63&t]},t=function(){var e,t,r;for(r=[],u=e=0,t=c;e<t;u=e+=3)r.push(a(u));return r}().join(""),1===n?(i=o[c],t+=s[(252&i)>>2]+s[(3&i)<<4]+"=="):2===n&&(i=o[c]<<8|o[c+1],t+=s[(64512&i)>>10]+s[(1008&i)>>4]+s[(15&i)<<2]+"="),t},e.concatArrayBuffers=function(e,t){var r;return(r=new Uint8Array(e.byteLength+t.byteLength)).set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer},e.generateGUID=function(){var t;return t=window.crypto.getRandomValues(new Uint8Array(32)),t=e.arrayBufferToBase64(t),e.base64ToBase64URL(t)},e.mapFromURI=function(t){var r;return t=(t=t.toLowerCase()).toLowerCase(),t=btoa(t),t=e.base64ToBase64URL(t),r=XMLSecEnum.URIMapper[t],XMLSecEnum.WebCryptoAlgMapper[r]||r},e.base64URLtoBase64=function(e){return(e=(e=e.split("-").join("+").toString()).split("_").join("/").toString()).length%4==1&&(e+="="),e.length%4==2&&(e+="=="),e},e.ensureHasId=function(t){var r,n,o,i,s;for(r="",9===t.nodeType&&(t=t.documentElement),n=i=0,s=XMLSecEnum.idAttributes.length-1;(0<=s?i<=s:i>=s)&&!(r=utils.findAttr(t,XMLSecEnum.idAttributes[n]));n=0<=s?++i:--i);return r?r.value:(o=e.generateGUID(),t.setAttribute("ID",o),o)},e}()}.call(this),function(){window.utils=function(){function e(){}return e.findAttr=function(e,t,r){var n,o,i,s;for(o=0,i=(s=e.attributes).length;o<i;o++)if(n=s[o],this.attrEqualsExplicitly(n,t,r)||this.attrEqualsImplicitly(n,t,r,e))return n;return null},e.findFirst=function(e,t){var r;if(0===(r=xpath.select(t,e)).length)throw"could not find xpath "+t;return r[0]},e.findChilds=function(e,t,r){var n,o,i,s,a;for(a=[],o=0,i=(s=(e=e.documentElement||e).childNodes).length;o<i;o++)(n=s[o]).localName!==t||n.namespaceURI!==r&&r||a.push(n);return a},e.attrEqualsExplicitly=function(e,t,r){return e.localName===t&&(e.namespaceURI===r||!r)},e.attrEqualsImplicitly=function(e,t,r,n){return e.localName===t&&(!e.namespaceURI&&n.namespaceURI===r||!r)},e.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new window.DOMParser).parseFromString(e,"text/xml")}catch(e){e,t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw"Invalid XML: "+e;return t},e}()}.call(this),function(){window.Algorithms=function(){function e(){}return e.EncryptionAlgorithms={AES:{CBC:{128:"AESCBC128",192:"AESCBC192",256:"AESCBC256"},GCM:{128:"AESGCM128",192:"AESGCM192",256:"AESGCM256"}},RSA:{OAEP:"RSAOAEP"}},e.SigningAlgorithms={RSA:{SHA1:"RSASHA1"},HMAC:{SHA1:"HMACSHA1"}},e.DigestAlgorithms={SHA1:"SHA1"},e.TransformAlgorithms={C14N:"c14n",Enveloped_Signature:"envSig"},e}()}.call(this),function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){(function(){var t;window.setImmediate=e("timers").setImmediate,t=e("xml-c14n")(),window.CanonicalXML=function(){e.prototype.CanonicalisationMethod="http://www.w3.org/2001/10/xml-exc-c14n#WithComments";function e(e){this.can=t.createCanonicaliser(this.CanonicalisationMethod)}return e.prototype.canonicalise=function(e){var t;return t=this.can,new Promise(function(r,n){return t.canonicalise(e,function(e,t){return e?n(e):r(t)})})},e}()}).call(this)},{timers:3,"xml-c14n":4}],2:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}var c,l=[],p=!1,h=-1;function f(){p&&c&&(p=!1,c.length?l=c.concat(l):h=-1,l.length&&m())}function m(){if(!p){var e=u(f);p=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,p=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||p||u(m)};function d(e,t){this.fun=e,this.array=t}d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function g(){}i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],3:[function(e,t,r){var n=e("process/browser.js").nextTick,o=Function.prototype.apply,i=Array.prototype.slice,s={},a=0;r.setTimeout=function(){return new u(o.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new u(o.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()};function u(e,t){this._id=e,this._clearFn=t}u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r.setImmediate="function"==typeof setImmediate?setImmediate:function(e){var t=a++,o=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,n(function(){s[t]&&(o?e.apply(null,o):e.call(null),r.clearImmediate(t))}),t},r.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(e){delete s[e]}},{"process/browser.js":2}],4:[function(e,t,r){var n=e("./lib/algorithm/exclusive-canonicalisation"),o={algorithms:{"http://www.w3.org/2001/10/xml-exc-c14n#":function(e){return new n(e)},"http://www.w3.org/2001/10/xml-exc-c14n#WithComments":function(e){return(e=Object.create(e||null)).includeComments=!0,new n(e)}}},i=t.exports=function e(){if(!(this instanceof e))return new e;this.algorithms=Object.create(o.algorithms)};i.prototype.registerAlgorithm=function(e,t){return this.algorithms[e]=t,this},i.prototype.getAlgorithm=function(e){return this.algorithms[e]},i.prototype.createCanonicaliser=function(e,t){return this.algorithms[e](t)}},{"./lib/algorithm/exclusive-canonicalisation":6}],5:[function(e,t,r){var n=t.exports=function(e){};n.prototype.name=function(){return null},n.prototype.canonicalise=function(e,t){setImmediate(function(){return t(Error("not implemented"))})}},{}],6:[function(e,t,r){var n=e("../escape"),o=e("../algorithm"),i=t.exports=function(e){o.call(this,e),e=e||{},this.includeComments=!!e.includeComments,this.inclusiveNamespaces=e.inclusiveNamespaces||[]};i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype.name=function(){return"http://www.w3.org/2001/10/xml-exc-c14n#"+(this.includeComments?"WithComments":"")},i.prototype.canonicalise=function(e,t){var r=this;setImmediate(function(){try{var n=r._processInner(e)}catch(e){return t(e)}return t(null,n)})},i.prototype.getIncludeComments=function(){return!!this.includeComments},i.prototype.setIncludeComments=function(e){this.includeComments=!!e},i.prototype.getInclusiveNamespaces=function(){return this.inclusiveNamespaces.slice()},i.prototype.setInclusiveNamespaces=function(e){return this.inclusiveNamespaces=e.slice(),this},i.prototype.addInclusiveNamespace=function(e){return this.inclusiveNamespaces.push(e),this};var s=function(e,t){return!e.prefix&&t.prefix?-1:!t.prefix&&e.prefix?1:e.name.localeCompare(t.name)},a=function(e,t){var r=e.prefix+e.namespaceURI,n=t.prefix+t.namespaceURI;return r===n?0:r.localeCompare(n)};i.prototype._renderAttributes=function(e){return(e.attributes?[].slice.call(e.attributes):[]).filter(function(e){return 0!==e.name.indexOf("xmlns")}).sort(s).map(function(e){return" "+e.name+'="'+n.attributeEntities(e.value)+'"'}).join("")},i.prototype._renderNamespace=function(e,t,r){var o="",i=r,s=t.slice(),u=[],c=e.namespaceURI||"";if(e.prefix){if((h=s.filter(function(t){return t.prefix===e.prefix}).shift())&&h.namespaceURI!==e.namespaceURI){for(var l=0;l<s.length;++l)s[l].prefix===e.prefix&&s.splice(l--,1);h=null}h||(u.push({prefix:e.prefix,namespaceURI:e.namespaceURI}),s.push({prefix:e.prefix,namespaceURI:e.namespaceURI}))}else r!==c&&(i=c,o+=' xmlns="'+n.attributeEntities(i)+'"');if(e.attributes)for(l=0;l<e.attributes.length;l++){var p=e.attributes[l],h=null;if(p.prefix&&"xmlns"!==p.prefix&&(h=s.filter(function(e){return e.prefix===p.prefix}).shift())&&h.namespaceURI!==p.namespaceURI){for(l=0;l<s.length;++l)s[l].prefix===p.prefix&&s.splice(l--,1);h=null}p.prefix&&!h&&"xmlns"!==p.prefix?(u.push({prefix:p.prefix,namespaceURI:p.namespaceURI}),s.push({prefix:p.prefix,namespaceURI:p.namespaceURI})):p.prefix&&"xmlns"===p.prefix&&-1!==this.inclusiveNamespaces.indexOf(p.localName)&&u.push({prefix:p.localName,namespaceURI:p.nodeValue})}u.sort(a);for(l=0;l<u.length;++l)o+=" xmlns:"+u[l].prefix+'="'+n.attributeEntities(u[l].namespaceURI)+'"';return{rendered:o,newDefaultNamespace:i,newPrefixesInScope:s}},i.prototype._renderComment=function(e){var t=null,r=null;if(e.ownerDocument===e.parentNode){for(var o=e,i=e;null!==o;){if(o===e.ownerDocument.documentElement){t=!0;break}o=o.nextSibling}for(;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.previousSibling}}return(r?"\n":"")+"\x3c!--"+n.textEntities(e.data)+"--\x3e"+(t?"\n":"")},i.prototype._renderProcessingInstruction=function(e){if("xml"===e.tagName)return"";var t=null,r=null;if(e.ownerDocument===e.parentNode){for(var o=e,i=e;null!==o;){if(o===e.ownerDocument.documentElement){t=!0;break}o=o.nextSibling}for(;null!==i;){if(i===e.ownerDocument.documentElement){r=!0;break}i=i.previousSibling}}return(r?"\n":"")+"<?"+e.tagName+(e.data?" "+n.textEntities(e.data):"")+"?>"+(t?"\n":"")},i.prototype._processInner=function(e,t,r){if(r=r||"",t=t||[],3===e.nodeType)return e.ownerDocument===e.parentNode?n.textEntities(e.data.trim()):n.textEntities(e.data);if(7===e.nodeType)return this._renderProcessingInstruction(e);if(8===e.nodeType)return this.includeComments?this._renderComment(e):"";if(10===e.nodeType)return"";var o=this._renderNamespace(e,t,r),i=this;return[e.tagName?"<"+e.tagName+o.rendered+this._renderAttributes(e)+">":"",[].slice.call(e.childNodes).map(function(e){return i._processInner(e,o.newPrefixesInScope,o.newDefaultNamespace)}).join(""),e.tagName?"</"+e.tagName+">":""].join("")}},{"../algorithm":5,"../escape":7}],7:[function(e,t,r){var n=r.entities={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","\t":"&#x9;","\n":"&#xA;","\r":"&#xD;"};r.attributeEntities=function(e){return e.replace(/([\&<"\t\n\r])/g,function(e){return n[e]})},r.textEntities=function(e){return e.replace(/([\&<>\r])/g,function(e){return n[e]})}},{}]},{},[1]),function(){null==window.webcryptoImpl&&(window.webcryptoImpl=window.crypto.subtle),window.CryptoWrapper=function(){function e(){}return e.Sign=function(e,t){var r;return r=new TextEncoder("utf-8").encode(e),window.webcryptoImpl.sign({name:t.signAlg.name,hash:{name:t.hash}},t.privateKey,r).then(function(e){return Helper.arrayBufferToBase64(e)})},e.Verify=function(e,t,r){var n,o;return n=new TextEncoder("utf-8").encode(e),o=Helper.base64ToArrayBuffer(r.signatureValue),window.webcryptoImpl.verify({name:r.signAlg.name,hash:{name:r.signAlg.name}},t,o,n).then(function(e){return e})},e.WrapKey=function(e,t){return window.webcryptoImpl.wrapKey("raw",e,t,{name:t.algorithm.name,hash:{name:t.algorithm.hash.name}}).then(function(e){return Helper.arrayBufferToBase64(e)}).then(null,function(e){return console.error(e)})},e.UnWrapKey=function(e,t,r){return e=Helper.base64ToArrayBuffer(e),window.webcryptoImpl.unwrapKey("raw",e,t,{name:t.algorithm.name,hash:{name:t.algorithm.hash.name}},{name:r},!1,["encrypt","decrypt"]).then(function(e){return e}).then(null,function(e){return console.error(e)})},e.Encryption=function(e,t,r){var n,o,i,s;return i=t.algorithm.name,s=e.nodeType,e=(new XMLSerializer).serializeToString(e),o=new TextEncoder("utf-8").encode(e),n="AES-GCM"===i?window.crypto.getRandomValues(new Uint8Array(12)):window.crypto.getRandomValues(new Uint8Array(16)),r&&(n=n.fill(0)),window.webcryptoImpl.encrypt({name:i,iv:n},t,o).then(function(e){return e=Helper.concatArrayBuffers(n,e),[Helper.arrayBufferToBase64(e),s]})},e.AES_ModifyPadding=function(e,t){var r,n,o;return"",n=t.algorithm.name,r=e.slice(e.byteLength-16,e.byteLength),(o=new Uint8Array(16)).fill(16),window.webcryptoImpl.encrypt({name:n,iv:r},t,o).then(function(t){return Helper.concatArrayBuffers(e,t)})},e.Decryption=function(e,t){var r,n,o;return o=t.algorithm.name,n=Helper.base64ToArrayBuffer(e),"AES-GCM"===o?(r=n.slice(0,12),n=n.slice(12,n.byteLength)):(r=n.slice(0,16),n=n.slice(16,n.byteLength)),r=new Uint8Array(r),"AES-CBC"===o?this.AES_ModifyPadding(n,t).then(function(e){return window.webcryptoImpl.decrypt({name:o,iv:r},t,e).then(function(e){var t,r;return e=e.slice(0,e.byteLength-16),(r=(t=new Uint8Array(e))[t.length-1])<=16&&(e=e.slice(0,e.byteLength-r)),String.fromCharCode.apply(null,new Uint8Array(e))}).then(null,function(e){return console.error(e)})}):window.webcryptoImpl.decrypt({name:o,iv:r},t,n).then(function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}).then(null,function(e){return console.error(e)})},e.hash=function(e,t){var r;return r=new TextEncoder("utf-8").encode(e),webcryptoImpl.digest(t,r).then(function(e){return Helper.arrayBufferToBase64(e)}).then(null,function(e){return e})},e}()}.call(this),function(){window.ElementBuilder=function(){function e(){}return e.buildWrappingElement=function(){var e;return e=document.implementation.createDocumentType("Document","Document","<!ENTITY Document 'Document'>"),document.implementation.createDocument("","Document",e)},e.buildRSAKeyInfoElement=function(e,t,r){var n,o,i,s,a,u,c,l,p;return o=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),a=(p=document.implementation.createDocument("","keyInfo",o)).createElement(e+"KeyInfo"),u=p.createElement(e+"KeyValue"),n=p.createElement(e+"RSAKeyValue"),c=p.createElement(e+"Modulus"),l=p.createTextNode(t),c.appendChild(l),i=p.createElement(e+"Exponent"),s=p.createTextNode(r),i.appendChild(s),n.appendChild(c),n.appendChild(i),u.appendChild(n),a.appendChild(u),p.documentElement.appendChild(a)},e.buildSignatureElement=function(e,t,r){var n,o,i,s,a,u;return u=e.replace(":",""),""!==e&&(u=":"+u),n=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),(o=(a=document.implementation.createDocument("","signature",n)).createElement(e+"Signature")).setAttribute("xmlns"+u,XMLSecEnum.namespaceURIs.xmlSig),o.appendChild(t),i=a.createElement(e+"SignatureValue"),s=a.createTextNode(r),i.appendChild(s),o.appendChild(i),a.documentElement.appendChild(o)},e.buildSignedInfoElement=function(e,t){var r,n,o,i,s,a,u,c,l;for((s=e.prefix).replace(":",""),n=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),c=(l=document.implementation.createDocument("","signedInfo",n)).createElementNS(XMLSecEnum.namespaceURIs.xmlSig,s+"SignedInfo"),(r=l.createElement(s+"CanonicalizationMethod")).setAttribute("Algorithm",e.canonicalisationAlgURI),c.appendChild(r),(u=l.createElement(s+"SignatureMethod")).setAttribute("Algorithm",e.signAlgURI),c.appendChild(u),o=i=0,a=t.length-1;0<=a?i<=a:i>=a;o=0<=a?++i:--i)c.appendChild(t[o]);return l.documentElement.appendChild(c)},e.buildReferenceElement=function(e,t,r,n,o){var i,s,a,u,c,l,p,h,f,m,d;for(u=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),(h=(d=document.implementation.createDocument("","reference",u)).createElement(t+"Reference")).setAttribute("URI","#"+e),m=d.createElement(t+"Transforms"),h.appendChild(m),c=l=0,p=r.length-1;0<=p?l<=p:l>=p;c=0<=p?++l:--l)(f=d.createElement(t+"Transform")).setAttribute("Algorithm",r[c]),m.appendChild(f);return(i=d.createElement(t+"DigestMethod")).setAttribute("Algorithm",n),h.appendChild(i),s=d.createElement(t+"DigestValue"),a=d.createTextNode(o),s.appendChild(a),h.appendChild(s),d.documentElement.appendChild(h)},e.buildEncryptedDataElement=function(e,t,r,n,o){var i,s,a,u,c,l,p,h,f,m,d,g;return(m=r.prefix)?g=":"+r.keyInfoPrefix.replace(":",""):m="",u=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),c=(d=document.implementation.createDocument("","EncData",u)).createElementNS(XMLSecEnum.namespaceURIs.xmlEnc,m+"EncryptedData"),o&&c.setAttribute("id",o),c.setAttribute("Type",e),(l=d.createElementNS(XMLSecEnum.namespaceURIs.xmlEnc,m+"EncryptionMethod")).setAttribute("Algorithm",r.algIdentifer),c.appendChild(l),n&&((p=d.createElementNS(XMLSecEnum.namespaceURIs.xmlSig,r.keyInfoPrefix+"KeyInfo")).setAttribute("xmlns"+g,XMLSecEnum.namespaceURIs.xmlSig),h=d.createElementNS(XMLSecEnum.namespaceURIs.xmlSig,r.keyInfoPrefix+"KeyName"),f=d.createTextNode(r.asymKeyName),h.appendChild(f),p.appendChild(h),p.appendChild(n),c.appendChild(p)),i=d.createElementNS(XMLSecEnum.namespaceURIs.xmlEnc,m+"CipherData"),s=d.createElementNS(XMLSecEnum.namespaceURIs.xmlEnc,m+"CipherValue"),a=d.createTextNode(t),s.appendChild(a),i.appendChild(s),c.appendChild(i),d.documentElement.appendChild(c),(new XMLSerializer).serializeToString(d.documentElement.appendChild(c))},e.buildEncryptedKeyElement=function(e,t){var r,n,o,i,s,a,u,c,l,p,h;return(l=e.keyInfoPrefix)?h=":"+l.replace(":",""):(l="",""),o=document.implementation.createDocumentType("dummy","dummy","<!ENTITY dummy 'dummy'>"),i=(p=document.implementation.createDocument("","EncData",o)).createElement(l+"EncryptedKey"),(s=p.createElement(l+"EncryptionMethod")).setAttribute("Algorithm",e.asymAlgIdentifier),i.appendChild(s),(a=p.createElement(l+"KeyInfo")).setAttribute("xmlns"+h,XMLSecEnum.namespaceURIs.xmlSig),u=p.createElement(l+"KeyName"),c=p.createTextNode(e.asymKeyName),u.appendChild(c),a.appendChild(u),i.appendChild(a),p.createElement(l+"CipherData"),r=p.createElement(l+"CipherValue"),n=p.createTextNode(t),r.appendChild(n),i.appendChild(r),p.documentElement.appendChild(i)},e}()}.call(this),function(){window.EncryptedXML=function(){var e,t,r;function n(){}return n.prototype.encrypt=function(t,r){var n,o,i,s,a,u,c,l,p,h;for(n=[],l=[],c=[],i=a=0,p=r.references.length-1;0<=p?a<=p:a>=p;i=0<=p?++a:--a){if(l[i]=xpath.select(r.references[i].xpath,t),0===l[i].length)throw new Error("Node not found or invalid xPath:"+r.references[i].xpath);for(s=u=0,h=l[i].length-1;0<=h?u<=h:u>=h;s=0<=h?++u:--u)c.push(l[i][s])}return Promise.all(function(){var t,i,s;for(s=[],o=t=0,i=c.length-1;0<=i?t<=i:t>=i;o=0<=i?++t:--t)s.push(CryptoWrapper.Encryption(c[o],r.symKey,r.staticIV).then(function(t){var o,i;return r.withKeyInfo?(i="Id_"+r.asymKeyName+"_"+Helper.generateGUID(),o=e(t[0],t[1],r,i).then(function(e){return o=utils.parseXML(e),n.push([o,r.keyName])})):(o=e(t[0],t[1],r,i),o=utils.parseXML(o),n.push([o,""]))}));return s}()).then(function(){var e,r,o;for(e=r=0,o=n.length-1;0<=o?r<=o:r>=o;e=0<=o?++r:--r)c[e].parentNode.replaceChild(n[e][0].firstChild,c[e]);return t})},e=function(e,t,r,n){var o;return o=3===t?XMLSecEnum.namespaceURIs.xmlEnc+XMLSecEnum.Type.Content:XMLSecEnum.namespaceURIs.xmlEnc+XMLSecEnum.Type.Element,r.withKeyInfo?CryptoWrapper.WrapKey(r.symKey,r.asymKey).then(function(t){var i;return i=ElementBuilder.buildEncryptedKeyElement(r,t),ElementBuilder.buildEncryptedDataElement(o,e,r,i,n)}):ElementBuilder.buildEncryptedDataElement(o,e,r)},r=function(e,t){var r,n,o,i;return n=e.getElementsByTagName(XMLSecEnum.NodeNames.encMethod)[0].getAttribute(XMLSecEnum.AttributeNames.algorithm),r=Helper.mapFromURI(n),o=(i=e.getElementsByTagName(XMLSecEnum.NodeNames.encKey)[0]).getElementsByTagName(XMLSecEnum.NodeNames.cipherValue)[0].innerHTML,i.parentNode.removeChild(i),CryptoWrapper.UnWrapKey(o,t,r.toUpperCase()).then(function(e){return e})},t=function(e,n,o,i){var s,a;return a=Helper.mapFromURI(e[i].getAttribute(XMLSecEnum.AttributeNames.type)),n.type===XMLSecEnum.KeyTypes.Private?r(e[i],n).then(function(r){var s;return s=e[i].getElementsByTagName(XMLSecEnum.NodeNames.cipherValue)[0].innerHTML,CryptoWrapper.Decryption(s,r).then(function(r){if(o.push([r,a]),i<e.length-1)return t(e,n,o,i+1)})}):n.type===XMLSecEnum.KeyTypes.Secret?(s=e[i].getElementsByTagName(XMLSecEnum.NodeNames.cipherValue)[0].innerHTML,CryptoWrapper.Decryption(s,n).then(function(r){if(o.push([r,a]),i<e.length-1)return t(e,n,o,i+1)})):void 0},n.prototype.decrypt=function(e,r){var n,o;if(n=[],0===(o=xpath.select(XMLSecEnum.xPathSelectors.EncryptedData,e)).length)throw new Error("No encData found");return t(o,r,n,0).then(function(){var t,r,i,s;for(t=r=0,s=n.length-1;0<=s?r<=s:r>=s;t=0<=s?++r:--r)n[t][1]===XMLSecEnum.Type.Element?o[t].parentNode.replaceChild(utils.parseXML(n[t][0]).firstChild,o[t]):(i=o[t].parentNode,o[t].parentNode.removeChild(o[t].parentNode.firstChild),i.innerHTML=n[t][0]);return e})},n}()}.call(this),function(){window.EncryptionParams=function(){e.symKey="",e.asymKey="",e.asymKeyName="",e.withKeyInfo="",e.staticIV=!1,e.prefix="",e.references="",e.algIdentifer="",e.asymAlgIdentifier="",e.keyLength="",e.keyInfoPrefix="";function e(){this.staticIV=!1}return e.prototype.setSymmetricKey=function(e){if(e&&(this.symKey=e,this.algIdentifer=XMLSecEnum.AlgIdentifiers[e.algorithm.name.replace("-","")+e.algorithm.length],this.keyLength=e.algorithm.length,!this.algIdentifer||""===this.algIdentifer))throw new Error("Algorithm not supported:"+algIdentifer);return this.symKey},e.prototype.setPublicKey=function(e,t){if(e&&(this.asymKey=e,this.withKeyInfo=!0,this.asymKeyName=t,this.asymAlgIdentifier=XMLSecEnum.AlgIdentifiers[e.algorithm.name.replace("-","")],!this.asymAlgIdentifier||""===this.asymAlgIdentifier))throw new Error("Algorithm not supported:"+asymAlgIdentifier);return this.asymKey},e.prototype.setPrefix=function(e){if(""!==e)return-1===e.indexOf(":")?this.prefix=e+":":this.prefix=e},e.prototype.setKeyInfoPrefix=function(e){if(""!==e)return-1===e.indexOf(":")?this.keyInfoPrefix=e+":":this.keyInfoPrefix=e},e.prototype.setStaticIV=function(e){return this.staticIV=e},e.prototype.setReferences=function(e){return this.references=e},e.prototype.getEncryptionInfo=function(){return{symKey:this.symKey,keyLength:this.keyLength,asymKey:this.asymKey,asymKeyName:this.asymKeyName,withKeyInfo:this.withKeyInfo,staticIV:this.staticIV,prefix:this.prefix,references:this.references,algIdentifer:this.algIdentifer,asymAlgIdentifier:this.asymAlgIdentifier,keyInfoPrefix:this.keyInfoPrefix}},e}()}.call(this),function(){window.Reference=function(){var e,t;r.prototype.xpath="",r.prototype.transforms=[],r.prototype.digestAlg="",r.prototype.digestAlgURI="",r.prototype.uri="",r.prototype.digestValue="",r.prototype.isEmptyUri="";function r(e,r,n,o,i){var s,a,u;if(this.xpath=e,this.transforms=r,this.digestAlg=n,this.uri=o,this.digestValue=i,"/*"===this.xpath||""===this.xpath?(this.xpath="/*",this.isEmptyUri=!0):this.isEmptyUri=!1,this.transforms){for(s=a=0,u=this.transforms.length-1;0<=u?a<=u:a>=u;s=0<=u?++a:--a)if(this.transforms[s].indexOf("http")>-1)this.transforms[s]=this.transforms[s];else{if(!XMLSecEnum.AlgIdentifiers[this.transforms[s]])throw new Error("Algorithm not Supported:"+this.transforms[s]);this.transforms[s]=XMLSecEnum.AlgIdentifiers[this.transforms[s]]}this.transforms=t(this.transforms)}this.digestAlg&&(this.digestAlg.indexOf("http")>-1?(this.digestAlgURI=this.digestAlg,this.digestAlg=Helper.mapFromURI(this.digestAlg)):XMLSecEnum.AlgIdentifiers[this.digestAlg.toUpperCase()]&&(this.digestAlgURI=XMLSecEnum.AlgIdentifiers[this.digestAlg.toUpperCase()],this.digestAlg=XMLSecEnum.WebCryptoAlgMapper[this.digestAlg.toUpperCase()])),new Error("Algorithm not Supported:"+this.digestAlg)}return r.prototype.setEnvelopedSignatureTransform=function(){var t,r,n,o;if(t=!1,this.transforms)for(r=n=0,o=this.transforms.length-1;0<=o?n<=o:n>=o;r=0<=o?++n:--n)if(XMLSecEnum.AlgIdentifiers[this.transforms[r]]===XMLSecEnum.AlgIdentifiers.envSig||this.transforms[r]===XMLSecEnum.AlgIdentifiers.envSig){t=!0;break}return!1===t&&(this.transforms[this.transforms.length]=XMLSecEnum.AlgIdentifiers.envSig),this.transforms=e(this.transforms)},e=function(e){var t,r,n,o;for((o=[]).push(XMLSecEnum.AlgIdentifiers.envSig),t=r=0,n=e.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)e[t]!==XMLSecEnum.AlgIdentifiers.envSig&&o.push(e[t]);return this.transforms=o},t=function(e){var t,r,n,o;for(o=[],t=r=0,n=e.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)e[t]!==XMLSecEnum.AlgIdentifiers.c14n&&o.push(e[t]);return o.push(XMLSecEnum.AlgIdentifiers.c14n),this.transforms=o},r}()}.call(this),function(){window.SignatureParams=function(){e.signAlg="",e.signAlgURI="",e.references=[],e.publicKey="",e.privateKey="",e.prefix="",e.canonicalisationAlgURI="",e.canonicalisationAlg="",e.signatureValue="",e.signatureType="";function e(){this.prefix=""}return e.prototype.setCanonicalisationAlg=function(e){if(this.canonicalisationAlgURI=XMLSecEnum.AlgIdentifiers[e],this.canonicalisationAlg=XMLSecEnum.WebCryptoAlgMapper[e],!this.canonicalisationAlg||""===this.canonicalisationAlg)throw new Error("Algorithm not supported:"+canonicalisationAlg)},e.prototype.setPrefix=function(e){if(""!==e)return-1===e.indexOf(":")?this.prefix=e+":":this.prefix=e},e.prototype.setSigAlg=function(e){if(this.signAlgURI=XMLSecEnum.AlgIdentifiers[e],this.signAlg=XMLSecEnum.WebCryptoAlgMapper[e],!this.signAlg||""===this.signAlg)throw new Error("Algorithm not supported:"+e)},e.prototype.setSigAlgFromURI=function(e){if(this.signAlgURI=e,this.signAlg=Helper.mapFromURI(e),!this.signAlg||""===this.signAlg)throw new Error("Algorithm not supported:"+e)},e.prototype.setCanonicalisationAlgFromURI=function(e){if(this.canonicalisationAlgURI=e,this.canonicalisationAlg=Helper.mapFromURI(e),!this.canonicalisationAlg||""===this.canonicalisationAlg)throw new Error("Algorithm not supported:"+e)},e.prototype.setReferences=function(e){var t,r,n,o;if(this.references=e,this.signatureType===XMLSecEnum.signatureTypesEnum.Enveloped&&e){for(o=[],t=r=0,n=this.references.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)o.push(this.references[t].setEnvelopedSignatureTransform());return o}},e.prototype.setKeyPair=function(e,t){if(this.publicKey=e,this.privateKey=t,!this.publicKey||!this.privateKey)throw new Error("No key")},e.prototype.setSignatureValue=function(e){return this.signatureValue=e},e.prototype.setSignatureType=function(e){var t,r,n,o;if(this.signatureType=e,e===XMLSecEnum.signatureTypesEnum.Enveloped&&this.references){for(o=[],t=r=0,n=this.references.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)o.push(this.references[t].setEnvelopedSignatureTransform());return o}},e.prototype.getSignatureParams=function(){return{signAlgURI:this.signAlgURI,signAlg:this.signAlg,references:this.references,privateKey:this.privateKey,publicKey:this.publicKey,prefix:this.prefix,canonicalisationAlg:this.canonicalisationAlg,canonicalisationAlgURI:this.canonicalisationAlgURI,signatureValue:this.signatureValue,signatureType:this.signatureType}},e}()}.call(this),function(){window.SignatureValidationResults=function(){function e(){this.result="",this.validatedSignature="",this.validatedReferences=[],this.validationErrors=[]}return e.prototype.setResult=function(e){return this.result=e},e.prototype.addValidatedReference=function(e,t,r){var n;return(n={reference:"",node:"",error:""}).reference=e,n.node=t,n.error=r,(r||""!==r)&&this.validationErrors.push(r),this.validatedReferences.push(n)},e.prototype.setReferences=function(e){var t,r,n;for(t=r=0,n=e.length-1;0<=n?r<=n:r>=n;t=0<=n?++r:--r)this.addValidatedReference(e[t][0],e[t][1],e[t][2]);return this.validatedReferences},e.prototype.setValidatedSignature=function(e){return this.validatedSignature=e},e.prototype.addValidationErrors=function(e){if(e||""!==e)return this.validationErrors.push(e)},e.prototype.getResults=function(){return{result:this.result,validatedReferences:this.validatedReferences,validatedSignature:this.validatedSignature,validationErrors:this.validationErrors}},e.prototype.getResult=function(){return this.result},e.prototype.getValidationErrors=function(){return this.validationErrors},e}()}.call(this),function(){null==window.webcryptoImpl&&(window.webcryptoImpl=window.crypto.subtle),window.SignedXML=function(){var e,t,r,n,o,i,s,a,u,c,l,p;function h(){}return r=function(e,t){return(new CanonicalXML).canonicalise(e).then(function(r){return CryptoWrapper.Sign(r,t).then(function(r){return ElementBuilder.buildSignatureElement(t.prefix,e,r)})})},h.prototype.sign=function(e,t){var o,i;return i=t.prefix,o=i||"",s(e,t).then(function(i){return r(i,t).then(function(r){var i;return i=r,n(o,t.publicKey).then(function(n){var o;return n&&i.appendChild(n),t.signatureType===XMLSecEnum.signatureTypesEnum.Enveloped&&e.documentElement.appendChild(r),t.signatureType===XMLSecEnum.signatureTypesEnum.Detached&&((o=ElementBuilder.buildWrappingElement()).documentElement.appendChild(e.children[0]),o.documentElement.appendChild(r),e=o),e})})})},n=function(e,t){var r;return r=t.algorithm.name,window.webcryptoImpl.exportKey("jwk",t).then(function(t){var n,o;if(r===XMLSecEnum.WebCryptoAlgMapper.RSASHA1.name)return n=Helper.base64URLtoBase64(t.e,t),o=Helper.base64URLtoBase64(t.n,exportKey),ElementBuilder.buildRSAKeyInfoElement(e,o,n)})},i=function(t,r){var n,i,s;return"",s=e(t,r),Promise.all(function(){var e,a,u;for(u=[],n=e=0,a=s.length-1;0<=a?e<=a:e>=a;n=0<=a?++e:--e)i=s[n],u.push(o(t,r,i).then(function(e){return""[n]=e}));return u}()).then(function(e){return e})},e=function(e,t){var r,n,o,i,s,a,u,c,l,p,h;for(a=[],h="",r=i=0,l=t.references.length-1;0<=l?i<=l:i>=l;r=0<=l?++i:--i)if(c=t.references[r],(u=xpath.select(c.xpath,e)).length>1)for(o=s=0,p=u.length-1;0<=p?s<=p:s>=p;o=0<=p?++s:--s)n="//*[@id='"+Helper.ensureHasId(u[o])+"']",h=new Reference(n,c.transforms,c.digestAlgURI),a.push(h);else if(1===u.length)n="//*[@id='"+Helper.ensureHasId(u[0])+"']",h=new Reference(n,c.transforms,c.digestAlgURI),a.push(c);else if(0===node.length)throw new Error("Node not found or invalid xPath:"+c.xpath);return a},o=function(e,t,r){var n,o,i,s,a,u;for(t.prefix||"",s=xpath.select(r.xpath,e)[0],o=Helper.ensureHasId(s),u=s,n=i=0,a=r.transforms.length-1;0<=a?i<=a:i>=a;n=0<=a?++i:--i)if(Helper.mapFromURI(r.transforms[n])!==XMLSecEnum.WebCryptoAlgMapper.envelopedSignature){if(Helper.mapFromURI(r.transforms[n])===XMLSecEnum.WebCryptoAlgMapper.c14n)return(new CanonicalXML).canonicalise(u).then(function(e){return CryptoWrapper.hash(e,r.digestAlg).then(function(e){return ElementBuilder.buildReferenceElement(o,t.prefix,r.transforms,r.digestAlgURI,e)}).then(null,function(e){return console.log(e)})});throw new Error("Algorithm not supported")}},s=function(e,t){return t.signatureAlg,[],i(e,t).then(function(e){return ElementBuilder.buildSignedInfoElement(t,e)})},u=function(e,t){var r,n,o,i,s,u,c,l,p;if("string"==typeof e&&(p=utils.parseXML(p)),!(r=xpath.select(XMLSecEnum.xPathSelectors.Signature,e))||1!==r.length)throw new error("No or more than one Signature Element detected!");if(t.setValidatedSignature(r),l=new SignatureParams,0===(s=xpath.select(XMLSecEnum.xPathSelectors.CanonicalisationAlg,e)).length)throw new Error("could not find CanonicalizationMethod/@Algorithm element");if(l.setCanonicalisationAlgFromURI(s[0].value),l.setSigAlgFromURI(utils.findFirst(e,XMLSecEnum.xPathSelectors.SignatureAlg).value),i=[],0===(c=xpath.select(XMLSecEnum.xPathSelectors.References,e)).length)throw new Error("could not find any Reference elements");for(n=o=0,u=c.length-1;0<=u?o<=u:o>=u;n=0<=u?++o:--o)i.push(a(c[n]));return l.setReferences(i),l.setSignatureValue(utils.findFirst(e,XMLSecEnum.xPathSelectors.SingatureValue).data.replace(/\n/g,"")),xpath.select(XMLSecEnum.xPathSelectors.Signature,e)[0].remove(),l.getSignatureParams()},a=function(e){var t,r,n,o,i,s,a,u,c,l,p;if(!(t=utils.findAttr(utils.findChilds(e,XMLSecEnum.NodeNames.digestMethod)[0],XMLSecEnum.AttributeNames.algorithm)))throw new Error("could not find Algorithm attribute in node "+digestAlgoNode.toString());if(n=t.value,0===(s=utils.findChilds(e,XMLSecEnum.NodeNames.digestValue)).length)throw new Error("could not find DigestValue node in reference "+e.toString());if(0===s[0].childNodes.length||!s[0].firstChild.data)throw new Error("could not find the value of DigestValue in "+s[0].toString());if(o=s[0].firstChild.data,[],c=[],0!==(s=utils.findChilds(e,XMLSecEnum.NodeNames.transforms)).length)for(p=s[0],u=i=0,a=(l=utils.findChilds(p,XMLSecEnum.NodeNames.transform)).length-1;0<=a?i<=a:i>=a;u=0<=a?++i:--i)c.push(utils.findAttr(l[u],XMLSecEnum.AttributeNames.algorithm).value);return r=Helper.mapFromURI(n),new Reference(xpath,c,r,utils.findAttr(e,"URI").value,o)},h.prototype.verify=function(e,r){var n,o,i,s;return(s=utils.parseXML(e))||(s=e),n=new SignatureValidationResults,i=c(s),o=u(s,n),!1===t(o.references,o.signatureTypesEnum)&&(s=s.children[0].firstChild),p(i,r,o).then(function(e){return n.setResult(e[0]),n.addValidationErrors(e[1]),l(s,o.references,0,[]).then(function(e){return n.setReferences(e),n.getValidationErrors().length>0?n.setResult(!1):!0===n.getResult&&n.setResult(!0),n.getResults()})})},t=function(e){var t,r,n,o,i,s,a;for(r=!1,t=o=0,s=e.length-1;0<=s?o<=s:o>=s;t=0<=s?++o:--o)for(n=i=0,a=e[t].transforms.length-1;0<=a?i<=a:i>=a;n=0<=a?++i:--i)e[t].transforms[n]===XMLSecEnum.AlgIdentifiers.envSig&&(r=!0);return r},c=function(e){var t;return(t=xpath.select(XMLSecEnum.xPathSelectors.SignedInfo,e))&&1===t.length?t[0]:null},p=function(e,t,r){return(new CanonicalXML).canonicalise(e).then(function(e){return CryptoWrapper.Verify(e,t,r).then(function(e){var t;return t="",e||(t="Signature Value is invalid"),[e,t]})})},l=function(e,t,r,n){var o,i,s,a,u;if(u=[e],s=n,t[r].uri&&"/*"!==t[r].uri){if((i=xpath.select("//*[@id='"+t[r].uri.substring(1)+"']",e)).length>1)throw new error("Id is not unique");o=i[0]}else o=u[0];return a=o,new Promise(function(e,n){var o,i,s,u;for(i=!1,u=o=0,s=t[r].transforms.length-1;0<=s?o<=s:o>=s;u=0<=s?++o:--o)Helper.mapFromURI(t[r].transforms[u])===XMLSecEnum.WebCryptoAlgMapper.c14n&&(i=!0,(new CanonicalXML).canonicalise(a).then(function(t){return e(t)}));if(!i)return e(a)}).then(function(o){return CryptoWrapper.hash(o,t[r].digestAlg).then(function(i){var a;return a="",i!==t[r].digestValue&&(a="Reference Validation Error of "+t[r].uri),s.push([t[r],o,a]),r<t.length-1?l(e,t,r+1,n):s})})},h.prototype.loadKey=function(e){var t,r,n,o,i,s,a,u,c,l;for((l=utils.parseXML(e))||(l=e),i=utils.findFirst(l,XMLSecEnum.xPathSelectors.Modulus).data,t=utils.findFirst(l,XMLSecEnum.xPathSelectors.Exponent).data,a=Helper.mapFromURI(utils.findFirst(l,XMLSecEnum.xPathSelectors.SignatureAlg).value),n=0,u=(s=new Uint8Array(Helper.base64ToArrayBuffer(i))).length-1;(0<=u?n<=u:n>=u)&&0===s[0];0<=u?++n:--n)s=s.slice(1);for(i=Helper.arrayBufferToBase64(s),i=Helper.base64ToBase64URL(i),o=0,c=(r=new Uint8Array(Helper.base64ToArrayBuffer(t))).length-1;(0<=c?o<=c:o>=c)&&0===r[0];0<=c?++o:--o)r.slice(1);return t=Helper.arrayBufferToBase64(r),t=Helper.base64ToBase64URL(t),window.webcryptoImpl.importKey("jwk",{kty:a.kty,e:t,n:i,alg:a.alg,ext:!0},{name:a.name,hash:{name:a.hash}},!1,["verify"]).then(function(e){return e}).then(null,function(e){return console.log(e)})},h}()}.call(this),function(){window.XMLSecEnum=function(){e.namespaceURIs={xmlSig:"http://www.w3.org/2000/09/xmldsig#",xmlEnc:"http://www.w3.org/2001/04/xmlenc#"},e.WebCryptoAlgMapper={RSASHA1:{kty:"RSA",alg:"RS1",name:"RSASSA-PKCS1-v1_5",hash:"SHA-1"},HMACSHA1:{name:"HMAC",hash:"SHA-1"},SHA1:"SHA-1",AESCBC:"AES-CBC",AESGCM:"AES-GCM",c14n:"c14n"},e.URIMapper={aHR0cDovL3d3dy53My5vcmcvdHIvMjAwMS9yZWMteG1sLWMxNG4tMjAwMTAzMTU:"c14n",aHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3JzYS1zaGEx:"RSASHA1",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjYWVzMTI4LWNiYw:"AESCBC",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjYWVzMTkyLWNiYw:"AESCBC",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjYWVzMjU2LWNiYw:"AESCBC",aHR0cDovL3d3dy53My5vcmcvMjAwOS94bWxlbmMjYWVzMTI4LWdjbQ:"AESGCM",aHR0cDovL3d3dy53My5vcmcvMjAwOS94bWxlbmMjYWVzMTkyLWdjbQ:"AESGCM",aHR0cDovL3d3dy53My5vcmcvMjAwOS94bWxlbmMjYWVzMjU2LWdjbQ:"AESGCM",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjZWxlbWVudA:"Element",aHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxlbmMjY29udGVudA:"Content",aHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3NoYTE:"SHA1",aHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI2htYWMtc2hhMQ:"HMACSHA1"},e.signatureTypesEnum={Enveloped:"Enveloped",Detached:"Detached"},e.AlgIdentifiers={AESCBC128:"http://www.w3.org/2001/04/xmlenc#aes128-cbc",AESCBC192:"http://www.w3.org/2001/04/xmlenc#aes192-cbc",AESCBC256:"http://www.w3.org/2001/04/xmlenc#aes256-cbc",AESGCM128:"http://www.w3.org/2009/xmlenc#aes128-gcm",AESGCM192:"http://www.w3.org/2009/xmlenc#aes192-gcm",AESGCM256:"http://www.w3.org/2009/xmlenc#aes256-gcm",RSAOAEP:"http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p",RSASHA1:"http://www.w3.org/2000/09/xmldsig#rsa-sha1",c14n:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",envSig:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",SHA1:"http://www.w3.org/2000/09/xmldsig#sha1",HMACSHA1:"http://www.w3.org/2000/09/xmldsig#hmac-sha1"},e.Type={Element:"Element",Content:"Content"},e.KeyTypes={Private:"private",Secret:"secret",Public:"public"},e.NodeNames={encData:"EncryptedData",encMethod:"EncryptionMethod",encKey:"EncryptedKey",cipherValue:"CipherValue",digestMethod:"DigestMethod",digestValue:"DigestValue",transforms:"Transforms",transform:"Transform",signature:"Signature",signedInfo:"SignedInfo"},e.AttributeNames={type:"Type",algorithm:"Algorithm"},e.xPathSelectors={CanonicalisationAlg:".//*[local-name(.)='CanonicalizationMethod']/@Algorithm",SignatureAlg:".//*[local-name(.)='SignatureMethod']/@Algorithm",References:".//*[local-name(.)='SignedInfo']/*[local-name(.)='Reference']",SingatureValue:".//*[local-name(.)='SignatureValue']/text()",Modulus:".//*[local-name(.)='Modulus']/text()",Exponent:".//*[local-name(.)='Exponent']/text()",EncryptedData:"//*[local-name()='EncryptedData']",Signature:"//*[local-name()='Signature']",SignedInfo:"//*[local-name()='SignedInfo']"},e.idAttributes=["Id","ID","id"];function e(){}return e}()}.call(this);